(this["webpackJsonpzesp-ui-app"]=this["webpackJsonpzesp-ui-app"]||[]).push([[0],{110:function(e,t,n){var c={"./config":51,"./config.js":51,"./locales/en/common":58,"./locales/en/common.json":58,"./locales/en/nav":59,"./locales/en/nav.json":59,"./locales/en/pages/devices":60,"./locales/en/pages/devices.json":60,"./locales/en/pages/setup-mqtt":61,"./locales/en/pages/setup-mqtt.json":61,"./locales/en/pages/setup-wifi":62,"./locales/en/pages/setup-wifi.json":62,"./locales/en/pages/welcome":63,"./locales/en/pages/welcome.json":63};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}s.keys=function(){return Object.keys(c)},s.resolve=a,e.exports=s,s.id=110},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},127:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var c,s,a,r,o=n(0),i=n.n(o),l=n(21),d=n.n(l),u=(n(87),n(88),n(89),n(51),n(2)),j=n(6),b=n(9),p=n(8),m=(n(111),n(112),n(153)),f=(n(113),n(1)),v=function(){var e=Object(m.a)("nav").t;return Object(f.jsxs)("nav",{className:"nav nav-masthead justify-content-center",children:[Object(f.jsx)(b.b,{className:"nav-link",to:"/",exact:!0,children:e("home")}),Object(f.jsx)(b.b,{className:"nav-link",to:"/devices",children:e("devices")}),Object(f.jsx)(b.b,{className:"nav-link",to:"/setup",children:e("setup")})]})},h=n(19),O=n.n(h),g=(n(127),n(145)),x=Object(o.createContext)({state:{},setState:{}}),w=function(e){var t=e.children,n=e.value,c=void 0===n?{}:n;Object.assign(c,{spinnerLoadingShow:!1,zespConnected:!1,appInitialized:!1,zespSettings:void 0,selectedServerIndex:null,devices:[]});var s=Object(o.useState)(c),a=Object(j.a)(s,2),r=a[0],i=a[1];return Object(f.jsx)(x.Provider,{value:{state:r,setState:i},children:t})},S=function(){var e=Object(o.useContext)(x);if(!e)throw new Error("useGlobalState must be used within a GlobalStateContext");return e},y=function(){return S().state.spinnerLoadingShow?(setTimeout((function(){return O()(".loading-overlay").removeClass("hidden")}),0),Object(f.jsx)("div",{className:"loading-overlay hidden",children:Object(f.jsx)(g.a,{animation:"border",variant:"light"})})):Object(f.jsx)(o.Fragment,{})},_=n(72),N={ConnectionStartTimeout:500,VerifyConnectionTimeout:5e3,DefaultRequestTimeoutSeconds:5},I=n(39),k=n(40),C=n(46),E=n(82),T="zesp-data-received",A=function(e){Object(k.a)(n,e);var t=Object(C.a)(n);function n(e,c,s){var a;return Object(I.a)(this,n),(a=t.call(this,T)).dataType=void 0,a.response=void 0,a.dataParts=void 0,a.dataType=e,a.dataParts=c,a.response=s,a}return n}(Object(E.a)(Event));!function(e){e[e.Restart=1012]="Restart"}(c||(c={}));var z,P,L,q,V=new EventTarget,M={connectAsync:function(e,t){return new Promise((function(n,c){return a&&r?(console.warn("ZespConnector already initialized"),void n(L.ZespConnector)):(a=e,r=t,setTimeout((function(){return M.reconnectAsync(!0).then((function(){return n(L.ZespConnector)})).catch((function(e){a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!1})})),c(e)}))}),N.ConnectionStartTimeout),z=setInterval((function(){return M.reconnectAsync(!1).then((function(){return n(L.ZespConnector)})).catch((function(e){console.warn("Reconnection is failed: ".concat(e)),a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!1})})),c(e)}))}),N.VerifyConnectionTimeout),M)}))},disconnect:function(){z&&(clearInterval(z),z=null),r=null,a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!1})}));try{var e,t,n,c,o,i,l;if(3===(null===(e=s)||void 0===e||null===(t=e.underlyingWebsocket)||void 0===t?void 0:t.readyState)||null==(null===(n=s)||void 0===n||null===(c=n.underlyingWebsocket)||void 0===c?void 0:c.readyState))return void console.debug("zesp connection already closed");if(1===(null===(o=s)||void 0===o||null===(i=o.underlyingWebsocket)||void 0===i?void 0:i.readyState))return console.debug("zesp connection closing..."),void s.close(1e3);null===(l=s)||void 0===l||l.close(1e3)}catch(d){}},reconnectAsync:function(e){return new Promise((function(t,n){var o,i,l,d;if(a||n("ZespConnector is not initialized yet"),r||n("Server configuration missed"),0!==(null===(o=s)||void 0===o||null===(i=o.underlyingWebsocket)||void 0===i?void 0:i.readyState))if(1!==(null===(l=s)||void 0===l||null===(d=l.underlyingWebsocket)||void 0===d?void 0:d.readyState)||e){console.debug("Start ws connection...");try{s.close(c.Restart)}catch(b){}a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!1})}));var j="https:"===document.location.protocol?"wss":"ws";s=new _.WebsocketBuilder("".concat(j,"://").concat(r.address,":81")).onOpen((function(){Z(),t()})).onClose(D).onError((function(){F(),n("zesp connection error")})).onMessage(J).build()}else t();else n("Already connecting")}))},send:function(e){if(!a)throw new Error("ZespConnector is not initialized yet");s.send(e)},requestAsync:function(e){var t=e.data,n=e.responseValidator,c=e.timeoutSeconds;return new Promise((function(e,s){(!c||c<=0)&&(c=N.DefaultRequestTimeoutSeconds);var a=!1,r=n,o=function t(n){var c=n;r.isValid(c)&&(a=!0,V.removeEventListener(T,t),e(c))};try{V.addEventListener(T,o),M.send(t),setTimeout((function(){a||(V.removeEventListener(T,o),console.warn("zesp response did not received (timeout: ".concat(c," seconds)")),s("timeout"))}),1e3*c)}catch(i){s("exception: ".concat(i))}}))},request:function(e){return new Promise((function(t,n){M.requestAsync(e).then((function(n){e.onSuccess?e.onSuccess(n):console.debug("zesp request completed (".concat(e.responseValidator.name,")")),t(L.ZespConnector)})).catch((function(t){var c="".concat(t," (").concat(e.responseValidator.name,"; ").concat(e.data,")");e.onError?e.onError(c):console.warn("zesp request failed: ".concat(c)),n(c)}))}))},subscribe:function(e,t){var n=function(n){var c=n;e.isValid(c)&&t(c)};return V.addEventListener(T,n),n},unsubscribe:function(e){return V.removeEventListener(T,e)},getGlobalState:function(){return a}},Z=function(){console.debug("Zesp connection opened"),a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!0})}))},D=function(){console.debug("Zesp connection closed"),a.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespConnected:!1})}))},F=function(){console.debug("Zesp connection error happened )=")},J=function(e,t){var n=t.data.replace(/\|(?=([^"]*"[^"]*")*[^"]*$)/gi,"\0").split("\0");if(0!=n.length){var c=n.shift();/\/(.+)\.json/gi.exec(c)&&(n.unshift(c),c="json");var s=new A(c,n,t.data);V.dispatchEvent(s)}else console.warn("Received empty message from zesp")},B=M,R={init:function(e){P?console.warn("Loader spinner already initialized"):P=e},show:function(){return W(!0)},hide:function(){return W(!1)}},W=function(e){return P.setState((function(t){return Object(u.a)(Object(u.a)({},t),{spinnerLoadingShow:e})}))};(q=L||(L={})).ZespConnector=B,q.ZespConnectorPromise=new Promise((function(e){return e(L.ZespConnector)})),q.Spinner=R;var H=function e(t){return{name:e.name,isValid:function(e){if("json"!==e.dataType)return!1;var n=e.dataParts[0];return/\/(.+)\.json/gi.exec(n)[1]===t}}},Q=function e(t){return{name:e.name,isValid:function(e){return e.dataType===t}}},G=n(73),U=n(74),$={requestData:function(e){return e.request({data:"getDeviceList",responseValidator:Q("alldev"),onSuccess:function(t){return Y(t,e.getGlobalState())}})}},Y=function(e,t){var n=e.dataParts[0],c=[];Object.assign(c,JSON.parse(n));for(var s=function(){var e=r[a];e.templateInfo=U.find((function(t){return t.modelIds.findIndex((function(t){return t===e.ModelId}))>=0}));for(var t=0,n=Object.keys(e.Report);t<n.length;t++){var c=n[t];e.Report[c].reportIdInfo={p1:c.substr(0,2),deviceId:c.substr(2,4),command:c.substr(6),name:K(c.substr(2,4))}}},a=0,r=c;a<r.length;a++)s();t.setState((function(e){return Object(u.a)(Object(u.a)({},e),{devices:c})}))},K=function(e){var t=G[e];return null!==t&&void 0!==t?t:"unknown"},X=$,ee=!1;function te(e){console.log("groups received")}function ne(e){console.log("locations received")}function ce(e){console.log("MI Lamp data received")}function se(e){console.log("Device update received: ".concat(e.dataParts[1]))}var ae={initAsync:function(e){return new Promise((function(e,t){if(ee)return console.warn("zesp service already initialized"),void e();ee=!0,console.debug("Load initial data from zesp..."),L.ZespConnectorPromise.then((function(e){return e.request({data:"LoadJson|/groups.json",responseValidator:H("groups"),onSuccess:te})})).then((function(e){return e.request({data:"LoadJson|/location.json",responseValidator:H("location"),onSuccess:ne})})).then((function(e){return e.request({data:"get_Mi_lamp",responseValidator:Q("Mi_lamp"),onSuccess:ce})})).then(X.requestData).then((function(e){return e.subscribe(Q("rep"),se)})).then((function(){return e()})).catch((function(e){console.error("Cannot complete zesp service initialization: ".concat(e)),t(e)}))}))},ping:function(){return e="ping",L.ZespConnector.send(e);var e}},re={getAsync:function(){return new Promise((function(e,t){L.ZespConnector.requestAsync({data:"loadConfig",responseValidator:Q("jsconfig")}).then((function(e){return function(e){var t=JSON.parse(e),n={};return Object.assign(n,t),n}(e.dataParts[0])})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},setAsync:function(e){var t=["SaveJson","/jsconfig.txt",JSON.stringify(e)].join("|");return new Promise((function(e,n){L.ZespConnector.requestAsync({data:t,responseValidator:Q("ZD_RSP")}).then((function(t){"ok"===t.dataParts[1].toLocaleLowerCase()?e():n("Settings was not saved: ".concat(t.response))})).catch((function(e){return n(e)}))}))}},oe=n(35),ie=function(e){return Object(f.jsx)("div",{className:"cover text-center d-flex content-light align-self-center flex-grow-1 align-items-center",children:Object(f.jsx)("div",{className:"",children:e.children})})},le=(n(136),function(e){var t=Object(o.useState)("show-transition hidden"),n=Object(j.a)(t,2),c=n[0],s=n[1];return setTimeout((function(){return s("show-transition")}),0),Object(f.jsx)("div",{className:c,children:e.children})}),de=function(){return Object(f.jsx)(ie,{children:Object(f.jsxs)(le,{children:[Object(f.jsx)("h1",{className:"cover-heading",children:"Quite soon, here will be useful info"}),Object(f.jsx)("p",{className:"lead",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultricies ipsum porttitor, aliquet enim eu, congue nulla. Nulla luctus ante sit amet sodales convallis. Aliquam lectus nisl, semper eget aliquam et, malesuada ut orci."}),Object(f.jsx)("p",{className:"lead",children:Object(f.jsx)("a",{href:"https://t.me/zesp32",target:"_blank",rel:"noreferrer",className:"btn btn-lg btn-secondary",children:"Get more"})})]})})},ue=(n(137),n(152)),je=function(e){var t,n=(t=e.device).templateInfo?t.templateInfo.image:"zigbee.png",c="/device-images/".concat(n);return Object(f.jsx)("div",{className:"item-image",style:{backgroundImage:"url(".concat(c,")")}})};var be=function(e){for(var t=e.device.Name&&e.device.Name.length>0?e.device.Name:e.device.ModelId,n="/devices/".concat(e.device.IEEE,"-").concat(e.device.Device),c=[],s=0,a=Object.keys(e.device.Report);s<a.length;s++){var r=a[s];c.push(e.device.Report[r].reportIdInfo.name)}return c=c.filter((function(e,t){return"unknown"!==e&&c.indexOf(e)==t})).sort((function(e,t){return e>t?1:-1})),Object(f.jsx)(b.b,{className:"item p-3 border rounded",to:n,children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)(je,{device:e.device})}),Object(f.jsxs)("div",{className:"ps-2",children:[Object(f.jsx)("div",{className:"title",children:t}),Object(f.jsxs)("div",{className:"ieee text-muted small",children:[Object(f.jsx)("span",{className:"badge bg-info me-1",children:e.device.Device}),e.device.IEEE]}),c.length>0&&Object(f.jsx)("div",{className:"badges small",children:c.map((function(e,t){return Object(f.jsx)("span",{className:"badge bg-secondary",children:e},t)}))})]})]})})},pe=function(e){return 0==e.devices.length?Object(f.jsx)(o.Fragment,{}):Object(f.jsxs)("div",{className:"group border-top pt-4",children:[Object(f.jsxs)("div",{className:"title h5 pb-3",children:[e.title," ",Object(f.jsx)("span",{className:"badge bg-secondary",children:e.devices.length})]}),Object(f.jsx)("div",{className:"items d-flex flex-wrap",children:e.devices.map((function(e,t){return Object(f.jsx)(be,{device:e},t)}))})]})},me=function(){var e=S(),t=Object(m.a)("pages.devices").t;if(!e.state.devices||0==e.state.devices.length)return Object(f.jsx)("div",{children:"No devices found..."});var n=e.state.devices,c=n.findIndex((function(e){return"0000"===e.Device})),s=n[c],a=(n=n.filter((function(e){return e!=s}))).filter((function(e){var t;return"light"===(null===(t=e.templateInfo)||void 0===t?void 0:t.group)})),r=n.filter((function(e){var t;return"sensor"===(null===(t=e.templateInfo)||void 0===t?void 0:t.group)})),o=n.filter((function(e){var t;return"switch"===(null===(t=e.templateInfo)||void 0===t?void 0:t.group)})),i=n.filter((function(e){return!a.includes(e)&&!r.includes(e)&&!o.includes(e)}));return Object(f.jsx)(le,{children:Object(f.jsx)("div",{className:"devices",children:Object(f.jsx)(ue.a,{children:Object(f.jsxs)(ue.a.Body,{children:[Object(f.jsxs)("div",{className:"group",children:[Object(f.jsx)("div",{className:"title h5 pb-3",children:t("groups.hub")}),Object(f.jsx)("div",{className:"items d-flex flex-wrap",children:Object(f.jsx)(be,{device:s})})]}),Object(f.jsx)(pe,{title:t("groups.lights"),devices:a}),Object(f.jsx)(pe,{title:t("groups.sensors"),devices:r}),Object(f.jsx)(pe,{title:t("groups.switches"),devices:o}),Object(f.jsx)(pe,{title:t("groups.other"),devices:i})]})})})})},fe=n(146),ve=n(150),he=n(80),Oe=function(e,t,n){var c=Object(u.a)(Object(u.a)({},t.state.zespSettings),e),s=re.setAsync(c).then((function(){return t.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},{zespSettings:c})}))}));return oe.b.promise(s,{loading:n("common:saving_progress"),success:n("common:saving_success"),error:n("common:saving_error")}),s},ge=function(){var e=S();return Object(o.useEffect)((function(){L.Spinner.show(),re.getAsync().then((function(t){e.setState((function(e){return Object(u.a)(Object(u.a)({},e),{zespSettings:t})})),L.Spinner.hide()})).catch((function(e){alert(e)}))}),[]),e.state.zespSettings?Object(f.jsxs)(le,{children:[Object(f.jsx)("div",{className:"aaa",children:"..."}),Object(f.jsx)(fe.a,{className:"p-0",children:Object(f.jsxs)(ve.a,{variant:"pills",children:[Object(f.jsx)(ve.a.Item,{children:Object(f.jsx)(b.b,{className:"nav-link",to:"/setup",exact:!0,children:"Wifi client"})}),Object(f.jsx)(ve.a.Item,{children:Object(f.jsx)(b.b,{className:"nav-link",to:"/setup/zigbee",children:"Zigbee settings"})}),Object(f.jsx)(ve.a.Item,{children:Object(f.jsx)(b.b,{className:"nav-link",to:"/setup/mqtt",children:"MQTT client"})}),Object(f.jsx)(ve.a.Item,{children:Object(f.jsx)(b.b,{className:"nav-link",to:"/setup/telegram",children:"Telegram bot"})}),Object(f.jsx)(ve.a.Item,{children:Object(f.jsx)(b.b,{className:"nav-link",to:"/setup/z2m",children:"Zigbee2MQTT client"})}),Object(f.jsx)(ve.a.Item,{className:"ms-auto",children:Object(f.jsxs)(b.b,{className:"nav-link",to:"/setup/zesp-ui",children:[Object(f.jsx)(he.a,{style:{marginTop:"-3px"}})," ZESP:UI"]})})]})})]}):Object(f.jsx)(o.Fragment,{})},xe=function(){var e=Object(p.f)(),t=e.ieee,n=e.device;return Object(f.jsx)(le,{children:Object(f.jsxs)(ue.a,{children:[Object(f.jsx)(ue.a.Header,{children:"Not implemented yet!"}),Object(f.jsxs)(ue.a.Body,{children:[Object(f.jsxs)("p",{children:["Device: ",Object(f.jsxs)("span",{className:"badge bg-info",children:[t," (",n,")"]})]}),Object(f.jsxs)("p",{children:["Hello, my dear friend! Just imagine how awesome this feature can be and share it with developers ~_~ ",Object(f.jsx)("br",{}),"Or you can even implement it yourself, everything you need is just to jump to source codes, made some magic, test it and that's it!"]}),Object(f.jsx)("p",{children:Object(f.jsx)(b.b,{to:"/devices",children:"Go back for now"})})]})]})})},we=n(147),Se=n(77),ye=n(148),_e=n(151),Ne=function(e){var t=e.controlId,n=e.label,c=e.placeholder,s=e.defaultValue,a=e.type,r=void 0===a?"text":a,o=e.value,i={placeholder:c,type:r};return s&&(i=Object(u.a)(Object(u.a)({},i),{defaultValue:s.toString()})),o&&(i=Object(u.a)(Object(u.a)({},i),{value:o.toString()})),Object(f.jsxs)(_e.a.Group,{as:we.a,className:"mb-3",controlId:t,children:[Object(f.jsx)(_e.a.Label,{column:!0,md:"3",lg:"2",children:n}),Object(f.jsx)(Se.a,{children:Object(f.jsx)(_e.a.Control,Object(u.a)({},i))})]})},Ie=function(e){var t=e.controlId,n=e.label,c=e.defaultChecked,s=e.checkedValue,a=void 0===s?"true":s,r=e.uncheckedValue,o="true"===c||"1"===c||1===c||!0===c||!1,i={checked_value:a,unchecked_value:void 0===r?"false":r};return c&&(i=Object(u.a)(Object(u.a)({},i),{defaultChecked:o})),Object(f.jsx)(_e.a.Group,{controlId:t,className:"d-inline-block",children:Object(f.jsxs)(_e.a.Label,{className:"d-flex",children:[Object(f.jsx)(_e.a.Check,Object(u.a)({className:"pe-2"},i)),Object(f.jsx)("span",{children:n})]})})},ke=n(3),Ce=n(29),Ee={handleSubmit:function(e,t){e.preventDefault();var n,c={},s=Object(Ce.a)(O()(e.target).find("input"));try{for(s.s();!(n=s.n()).done;){var a=n.value,r=O()(a).prop("id");if(null==r)return;"checkbox"===O()(a).prop("type")?!0===O()(a).prop("checked")?c[r]=O()(a).attr("checked_value")||"true":c[r]=O()(a).attr("unchecked_value")||"false":c[r]=O()(a).val()}}catch(o){s.e(o)}finally{s.f()}t(c)}},Te=["onSubmit"],Ae=function(e){var t=e.onSubmit,n=Object(ke.a)(e,Te);return Object(f.jsx)(_e.a,Object(u.a)(Object(u.a)({onSubmit:function(e){return Ee.handleSubmit(e,t)}},n),{},{children:e.children}))},ze=function(){var e,t,n=S(),c=Object(m.a)(["pages.setup-mqtt","common"]).t,s=null===(e=n.state.zespSettings)||void 0===e?void 0:e.MQTT;if(!s)return Object(f.jsx)(o.Fragment,{});return Object(f.jsx)(le,{children:Object(f.jsx)(ue.a,{children:Object(f.jsxs)(Ae,{onSubmit:function(e){return Oe({MQTT:e},n,c)},children:[Object(f.jsxs)(ue.a.Body,{children:[Object(f.jsx)(Ne,{controlId:"mqttup",defaultValue:s.mqttup,label:c("topic.label"),placeholder:c("topic.placeholder")}),Object(f.jsx)(Ne,{controlId:"mqtt",defaultValue:s.mqtt,label:c("server.label"),placeholder:c("server.placeholder")}),Object(f.jsx)(Ne,{controlId:"mqttPort",defaultValue:null===(t=s.mqttPort)||void 0===t?void 0:t.toString(),label:c("port.label"),placeholder:c("port.placeholder")}),Object(f.jsx)(Ne,{controlId:"mqttLogin",defaultValue:s.mqttLogin,label:c("login.label"),placeholder:c("login.placeholder")}),Object(f.jsx)(Ne,{type:"password",controlId:"mqttPassw",defaultValue:s.mqttPassw,label:c("password.label"),placeholder:c("password.placeholder")}),Object(f.jsxs)(we.a,{children:[Object(f.jsx)(Se.a,{md:"3",lg:"2"}),Object(f.jsxs)(Se.a,{className:"space-between-4",children:[Object(f.jsx)(Ie,{controlId:"mqttEnable",defaultChecked:s.mqttEnable,label:c("is_enabled.label"),checkedValue:1,uncheckedValue:0}),Object(f.jsx)(Ie,{controlId:"Home_Assistant",defaultChecked:s.Home_Assistant,label:c("is_ha_enabled.label"),checkedValue:1,uncheckedValue:0})]})]})]}),Object(f.jsx)(ue.a.Footer,{children:Object(f.jsx)(ye.a,{variant:"primary",type:"submit",children:c("common:save_button")})})]})})})},Pe=function(){return Object(f.jsx)(le,{children:Object(f.jsx)("div",{className:"px-4 py-5 bg-light rounded-3",children:Object(f.jsxs)("div",{className:"container-fluid",children:[Object(f.jsx)("h1",{className:"display-5 fw-bold",children:"Not implemented yet!"}),Object(f.jsxs)("p",{className:"col-md-8 fs-4",children:["Hello, my dear friend! Just imagine how awesome this feature can be and share it with developers ~_~ ",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"Or you can even implement it yourself, everything you need is just to jump to source codes, made some magic, test it and that's it!"]}),Object(f.jsx)("hr",{className:"my-4"}),Object(f.jsxs)("p",{children:["This feature is under contruction. You can find latest verion on ",Object(f.jsx)("a",{href:"#",children:"github project page"})," or just click this big blue button bellow."]}),Object(f.jsx)("a",{href:"#",target:"_blank",rel:"noreferrer",className:"btn btn-primary btn-lg",type:"button",children:"Learn more"})]})})})},Le=function(){var e,t=S(),n=Object(m.a)(["pages.setup-wifi","common"]).t,c=null===(e=t.state.zespSettings)||void 0===e?void 0:e.Wifi;if(!c)return Object(f.jsx)(o.Fragment,{});return Object(f.jsx)(o.Fragment,{children:Object(f.jsx)(le,{children:Object(f.jsx)(Ae,{onSubmit:function(e){return Oe({Wifi:e},t,n)},children:Object(f.jsxs)(ue.a,{children:[Object(f.jsxs)(ue.a.Body,{children:[Object(f.jsx)(Ne,{controlId:"ssid",defaultValue:null===c||void 0===c?void 0:c.ssid,label:n("ssid.label"),placeholder:n("ssid.placeholder")}),Object(f.jsx)(Ne,{type:"password",controlId:"pass",defaultValue:null===c||void 0===c?void 0:c.pass,label:n("pass.label"),placeholder:n("pass.placeholder")}),Object(f.jsx)(Ne,{controlId:"ip",defaultValue:null===c||void 0===c?void 0:c.ip,label:n("ip.label"),placeholder:n("ip.placeholder")}),Object(f.jsx)(Ne,{controlId:"mask",defaultValue:null===c||void 0===c?void 0:c.mask,label:n("mask.label"),placeholder:n("mask.placeholder")}),Object(f.jsx)(Ne,{controlId:"gw",defaultValue:null===c||void 0===c?void 0:c.gw,label:n("gw.label"),placeholder:n("gw.placeholder")})]}),Object(f.jsx)(ue.a.Footer,{children:Object(f.jsx)(ye.a,{variant:"primary",type:"submit",children:n("common:save_button")})})]})})})})},qe=function(){return Object(f.jsxs)(o.Fragment,{children:[Object(f.jsx)(p.a,{exact:!0,path:"/",component:de}),Object(f.jsx)(p.a,{exact:!0,path:"/devices",component:me}),Object(f.jsx)(p.a,{path:"/devices/:ieee-:device",component:xe}),Object(f.jsx)(p.a,{path:"/setup",component:ge}),Object(f.jsx)(p.a,{exact:!0,path:"/setup",component:Le}),Object(f.jsx)(p.a,{path:"/setup/mqtt",component:ze}),Object(f.jsx)(p.a,{path:"/setup/zigbee",component:Pe}),Object(f.jsx)(p.a,{path:"/setup/telegram",component:Pe}),Object(f.jsx)(p.a,{path:"/setup/z2m",component:Pe}),Object(f.jsx)(p.a,{path:"/setup/zesp-ui",component:Pe})]})},Ve=(n(52),function(e){var t=Object(m.a)("pages.welcome").t,n=e.servers.map((function(e,t){return{server:e,index:t}})).sort((function(e,t){return e.server.name>t.server.name?1:-1}));return Object(f.jsx)("div",{className:"container welcome-page h-100",children:Object(f.jsx)(le,{children:Object(f.jsxs)(ue.a,{className:"text-start",children:[Object(f.jsx)(ue.a.Header,{children:t("list.title")}),Object(f.jsxs)(ue.a.Body,{children:[0==e.servers.length&&Object(f.jsx)("div",{children:t("list.add_message")}),e.servers.length>0&&Object(f.jsx)("nav",{className:"servers-list",children:n.map((function(t,n){return Object(f.jsxs)("div",{className:"item",children:[Object(f.jsxs)(b.b,{className:"server-button",to:"/",onClick:function(n){e.openServerAction(t.index),n.preventDefault()},activeClassName:"none",children:[Object(f.jsx)("i",{className:"bi bi-caret-right-fill"})," ",t.server.name]}),Object(f.jsx)("button",{type:"button",onClick:function(){return e.openEditAction(t.server)},className:"edit-button",children:Object(f.jsx)("i",{className:"bi bi-pencil-fill"})})]},"item-".concat(n))}))})]}),Object(f.jsx)(ue.a.Footer,{className:"text-right",children:Object(f.jsx)("button",{type:"button",onClick:e.openAddServer,className:"btn btn-primary",children:t("list.add_button")})})]})})})}),Me=n(81),Ze=n(76),De=n(154),Fe=n(149),Je=function(e){var t,n,c=Object(m.a)("pages.welcome").t,s=Object(o.useState)(!1),a=Object(j.a)(s,2),r=a[0],i=a[1],l=Object(f.jsxs)(Me.a,{id:"popover-basic",children:[Object(f.jsx)(Me.a.Header,{as:"h3",children:c("edit.delete_title")}),Object(f.jsx)(Me.a.Body,{children:Object(f.jsx)("span",{dangerouslySetInnerHTML:{__html:c("edit.delete_message")}})})]});return Object(f.jsx)("div",{className:"container welcome-page h-100",children:Object(f.jsx)(le,{children:Object(f.jsx)(Ae,{onSubmit:function(t){return e.editServer?e.updateAction(t):e.addAction(t),Promise.resolve()},children:Object(f.jsxs)(ue.a,{className:"text-start",children:[Object(f.jsxs)(ue.a.Header,{className:"d-flex justify-content-between",children:[Object(f.jsx)("span",{className:"modal-title",children:c("edit.title")}),Object(f.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:e.closeAction})]}),Object(f.jsxs)(ue.a.Body,{children:[Object(f.jsx)(Ze.a,{className:"mb-2",id:"name",defaultValue:null===(t=e.editServer)||void 0===t?void 0:t.name,placeholder:c("edit.name_input_placeholder")}),Object(f.jsxs)(De.a,{children:[Object(f.jsxs)(De.a.Text,{id:"basic-addon3",children:["https:"===document.location.protocol?"wss":"ws","://"]}),Object(f.jsx)(Ze.a,{id:"address",defaultValue:null===(n=e.editServer)||void 0===n?void 0:n.address,"aria-describedby":"basic-addon3",placeholder:c("edit.address_input_placeholder")})]})]}),e.editServer&&Object(f.jsxs)(ue.a.Footer,{className:"d-flex justify-content-between",children:[Object(f.jsx)("div",{children:Object(f.jsx)(Fe.a,{trigger:"click",placement:"top",overlay:l,rootClose:!0,onToggle:i,children:Object(f.jsx)("button",{onClick:function(){r&&e.deleteAction()},type:"button",className:"btn btn-outline-danger",children:c("edit.delete_button")})})}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:c("edit.save_button")})]}),!e.editServer&&Object(f.jsx)(ue.a.Footer,{className:"text-right",children:Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:c("edit.add_button")})})]})})})})};function Be(e,t){var n=function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),c),t}},c=Object(o.useState)(n),s=Object(j.a)(c,2),a=s[0],r=s[1];return Object(o.useEffect)((function(){r(n())}),[]),Object(o.useEffect)((function(){var e=function(){r(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[a,function(t){"undefined"==typeof window&&console.warn("Tried setting localStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{var n=t instanceof Function?t(a):t;window.localStorage.setItem(e,JSON.stringify(n)),r(n),window.dispatchEvent(new Event("local-storage"))}catch(c){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),c)}}]}var Re=function(){var e=S(),t=Object(o.useState)("welcome"),n=Object(j.a)(t,2),c=n[0],s=n[1],a=Object(o.useState)(),r=Object(j.a)(a,2),i=r[0],l=r[1],d=Be("servers",[]),b=Object(j.a)(d,2),p=b[0],m=b[1],v=function(){l(void 0),s("welcome")};return"edit"===c?Object(f.jsx)(Je,{editServer:i,addAction:function(e){p.push(e),m(p),v()},updateAction:function(e){var t=p.indexOf(i);p[t]=e,m(p),console.log(p),v()},closeAction:v,deleteAction:function(){m(p.filter((function(e){return e!==i}))),v()}}):Object(f.jsx)(Ve,{servers:p,openAddServer:function(){l(void 0),s("edit")},openEditAction:function(e){l(e),s("edit")},openServerAction:function(t){e.setState((function(e){return Object(u.a)(Object(u.a)({},e),{selectedServerIndex:t})}))}})},We=function(){var e=S(),t=Be("servers",[]),n=Object(j.a)(t,1)[0],c=null===e.state.selectedServerIndex||n.length<=e.state.selectedServerIndex?null:n[e.state.selectedServerIndex];return c?Object(f.jsx)(He,{server:c}):Object(f.jsx)(Re,{})},He=function(e){var t=S();return Object(o.useEffect)((function(){L.Spinner.init(t),L.Spinner.show(),L.ZespConnectorPromise.then((function(n){return n.connectAsync(t,e.server)})).then((function(){return ae.initAsync(t)})).then((function(){t.setState((function(e){return Object(u.a)(Object(u.a)({},e),{appInitialized:!0})})),L.Spinner.hide()})).catch((function(n){t.setState((function(e){return Object(u.a)(Object(u.a)({},e),{appInitialized:!1,selectedServerIndex:null})})),L.ZespConnector.disconnect(),L.Spinner.hide(),oe.b.error("Ooops, cannot connect to the server (".concat(e.server.address,"). ").concat(n))}))}),[]),t.state.appInitialized?Object(f.jsxs)("div",{className:"container-md d-flex w-100 h-100 p-3 mx-auto flex-column",children:[Object(f.jsxs)("header",{className:"masthead",children:[Object(f.jsx)("a",{href:"/",children:Object(f.jsx)("h3",{className:"masthead-brand",children:"ZESP:UI"})}),Object(f.jsx)(v,{})]}),Object(f.jsx)("main",{role:"main",className:"text-start d-flex flex-grow-1 flex-column",children:Object(f.jsx)(qe,{})}),Object(f.jsx)("footer",{className:"mastfoot mt-3",children:Object(f.jsxs)("p",{children:["ZESP UI application, by ",Object(f.jsx)("a",{href:"https://t.me/NickRimmer",target:"_blank",rel:"noreferrer",children:"@NickRimmer"}),". (0.0.0 version, ",Object(f.jsx)("span",{children:"dev build"}),")"]})})]}):Object(f.jsx)(o.Fragment,{})},Qe=function(){return Object(f.jsx)(b.a,{children:Object(f.jsx)(p.c,{children:Object(f.jsxs)(w,{children:[Object(f.jsx)(We,{}),Object(f.jsx)(y,{}),Object(f.jsx)(oe.a,{})]})})})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};d.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Qe,{})}),document.getElementById("root")),Ge()},51:function(e,t,n){"use strict";n.r(t);var c=n(47),s=n(30),a=["en"],r=["common","nav","pages.setup-mqtt","pages.setup-wifi","pages.welcome","pages.devices"];c.a.use(s.e).init({fallbackLng:a[0],lng:a[0],resources:function(){for(var e={},t=0,c=a;t<c.length;t++){var s=c[t];e[s]={};for(var o=0,i=r;o<i.length;o++){var l=i[o],d="./locales/".concat(s,"/").concat(l.replace(".","/"),".json");try{e[s][l]=n(110)(""+d),console.debug("".concat(d," (ok)"))}catch(u){console.debug("".concat(d," (error)"))}}}return e}(),ns:r,defaultNS:"common"}),c.a.languages=a,t.default=c.a},52:function(e,t,n){},58:function(e){e.exports=JSON.parse('{"save_button":"Save changes","saving_success":"Saving successful","saving_error":"Oops... we cannot complete it )=","saving_progress":"Saving in progress..."}')},59:function(e){e.exports=JSON.parse('{"home":"Home","devices":"Devices","setup":"Settings"}')},60:function(e){e.exports=JSON.parse('{"groups":{"hub":"Hub devices","sensors":"Sensors or monitoring systems","switches":"Switches","lights":"Lights, bulbs","other":"Other or unknown devices"}}')},61:function(e){e.exports=JSON.parse('{"topic":{"label":"Topic name","placeholder":"Enter MQTT topic name (e.g. zesp32)"},"server":{"label":"Server address","placeholder":"Enter MQTT server address (e.g. 192.168.1.1)"},"port":{"label":"Server port","placeholder":"Enter MQTT server port (e.g. 1883)"},"login":{"label":"MQTT Login","placeholder":"Enter MQTT user login (e.g. mqtt)"},"password":{"label":"MQTT Password","placeholder":"Enter MQTT user password (e.g. pa$vv0rd)"},"is_enabled":{"label":"Client is enable"},"is_ha_enabled":{"label":"Home Assistant"}}')},62:function(e){e.exports=JSON.parse('{"ssid":{"label":"WIFI SSID","placeholder":"Enter SSID of your wifi AP (e.g. MySecretWifi)"},"pass":{"label":"WIFI Password","placeholder":"Enter your connection password (e.g. super-duper-password)"},"ip":{"label":"Local address","placeholder":"Enter static IP address and port of device with ZESP (e.g. 192.168.1.2:8082)"},"mask":{"label":"Local mask address","placeholder":"Enter device network mask (e.g. 255.255.255.0)"},"gw":{"label":"Gateway address","placeholder":"Enter gateway address (e.g. 192.168.1.1)"}}')},63:function(e){e.exports=JSON.parse('{"list":{"title":"Welcome here, stranger!","add_button":"Add a new server","add_message":"There is no servers added. Please, click this big blue button bellow to add your awesome server."},"edit":{"title":"Connection settings","delete_button":"Delete","delete_title":"Delete confirmation","delete_message":"Are you <strong>sure</strong> you want to delete it?<br/>Just asking, no pressure... if you want to continue, smash <span class=\'badge bg-danger\'>Delete</span> button bellow one more time.","save_button":"Save changes","add_button":"Add server","name_input_placeholder":"Enter display name (e.g. My hub4fun)","address_input_placeholder":"Your server address (e.g. 192.168.1.1)"}}')},73:function(e){e.exports=JSON.parse('{"1000":"Zll_Commissioning","0000":"Basic","0001":"Power_cfg","0002":"Device_Temperature_cfg","0003":"Identify","0004":"Groups","0005":"Scenes","0006":"On_Off","0007":"On_Off_Switch_cfg","0008":"Level_Control","0009":"Alarms","000A":"Time","000F":"Binary_Input","0016":"Partition","001A":"Power_Profile","001B":"En50523_Appliance_Control","0020":"Poll_Control","0021":"Green_Power","0100":"Shade_cfg","0101":"Door_Lock","0102":"Window_Covering","0200":"Pump_cfg_And_Control","0201":"Thermostat","0202":"Fan_Control","0204":"Thermostat_User_Interface_cfg","0300":"Color_Control","0400":"Illuminance_Measurement","0401":"Illuminance_Level_Sensing","0402":"Temperature_Measurement","0403":"Pressure_Measurement","0404":"Flow_Measurement","0405":"Relative_Humidity_Measurement","0406":"Occupancy_Sensing","0500":"Ias_Zone","0501":"Ias_Ace","0502":"Ias_Wd","0702":"Metering","0B00":"En50523_Appliance_Identification","0B01":"Meter_Identification","0B02":"En50523_Appliance_Events_And_Alert","0B03":"Appliance_Statistics","0B04":"Electricity_Measurement","0B05":"Diagnostics"}')},74:function(e){e.exports=JSON.parse('[{"modelIds":["ZESP_Root"],"group":"root","image":"zesp.jpg","template":"ZESP_Root.json"},{"modelIds":["lumi.sensor_switch"],"group":"switch","image":"default-sensor-switch.jpg","template":"lumi.sensor_switch.json"},{"modelIds":["lumi.sensor_motion"],"group":"sensor","image":"default-sensor-motion.jpg","template":"lumi.sensor_motion.json"},{"modelIds":["lumi.sensor_magnet"],"group":"sensor","image":"default-sensor-magnet.jpg","template":"lumi.sensor_magnet.json"}]')},87:function(e,t,n){},88:function(e,t,n){window.$=window.jQuery=n(19),console.debug=function(){console.log("Debug logs are disabled")}}},[[140,1,2]]]);
//# sourceMappingURL=main.86689878.chunk.js.map