(this["webpackJsonpzesp-ui-app"]=this["webpackJsonpzesp-ui-app"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var a=n(117),c=n(69),r=["en"],s=["common","nav","pages.setup-mqtt","pages.setup-wifi","pages.welcome","pages.devices"];a.a.use(c.e).init({fallbackLng:r[0],lng:r[0],resources:function(){for(var e={},t=0,a=r;t<a.length;t++){var c=a[t];e[c]={};for(var o=0,i=s;o<i.length;o++){var l=i[o],d="./locales/".concat(c,"/").concat(l.replace(".","/"),".json");try{e[c][l]=n(228)(""+d)}catch(u){console.debug("".concat(d," (error)"))}}}return e}(),ns:s,defaultNS:"common"}),a.a.languages=r,t.default=a.a},140:function(e,t,n){},146:function(e){e.exports=JSON.parse('{"save_button":"Save changes","saving_success":"Saving successful","saving_error":"Oops... we cannot complete it )=","saving_progress":"Saving in progress..."}')},147:function(e){e.exports=JSON.parse('{"home":"Home","devices":"Devices","setup":"Settings"}')},148:function(e){e.exports=JSON.parse('{"groups":{"hub":"Hub devices","sensors":"Sensors or monitoring systems","switches":"Switches","lights":"Lights and bulbs","other":"Other or unknown devices","all":"All registered devices"}}')},149:function(e){e.exports=JSON.parse('{"topic":{"label":"Topic name","placeholder":"Enter MQTT topic name (e.g. zesp32)"},"server":{"label":"Server address","placeholder":"Enter MQTT server address (e.g. 192.168.1.1)"},"port":{"label":"Server port","placeholder":"Enter MQTT server port (e.g. 1883)"},"login":{"label":"MQTT Login","placeholder":"Enter MQTT user login (e.g. mqtt)"},"password":{"label":"MQTT Password","placeholder":"Enter MQTT user password (e.g. pa$vv0rd)"},"is_enabled":{"label":"Client is enabled"},"is_ha_enabled":{"label":"Home Assistant"}}')},150:function(e){e.exports=JSON.parse('{"ssid":{"label":"WIFI SSID","placeholder":"Enter SSID of your wifi AP (e.g. MySecretWifi)"},"pass":{"label":"WIFI Password","placeholder":"Enter your connection password (e.g. super-duper-password)"},"ip":{"label":"Local address","placeholder":"Enter static IP address and port of device with ZESP (e.g. 192.168.1.2:8082)"},"mask":{"label":"Local mask address","placeholder":"Enter device network mask (e.g. 255.255.255.0)"},"gw":{"label":"Gateway address","placeholder":"Enter gateway address (e.g. 192.168.1.1)"}}')},151:function(e){e.exports=JSON.parse('{"list":{"title":"Welcome here, stranger!","add_button":"Add a new server","add_message":"There is no servers added. Please, click this big blue button bellow to add your awesome server."},"edit":{"title":"Connection settings","delete_button":"Delete","delete_title":"Delete confirmation","delete_message":"Are you <strong>sure</strong> you want to delete it?<br/>Just asking, no pressure... if you want to continue, smash <span class=\'badge bg-danger\'>Delete</span> button bellow one more time.","save_button":"Save changes","add_button":"Add server","name_input_placeholder":"Enter display name (e.g. My hub4fun)","address_input_placeholder":"Your server address (e.g. 192.168.1.1)"}}')},177:function(e){e.exports=JSON.parse('[{"id":"on_off_root","arguments":{"commandOn":"01 0000 01  0100","commandOff":"01 0000 01  0000"},"reportKey":{"endpoint":"01","clusterId":"0006","attributeId":"0000"}},{"id":"level_root","arguments":{"command":"MoveToLevel|0000|1|1|1|{value}|0009","min":0,"max":255},"reportKey":{"endpoint":"FF","clusterId":"BBBB","attributeId":"0001"}},{"id":"rgb_root","arguments":{"command":"MoveToColor|0000|1|1|{x}|{y}|0001"},"reportKey":{"endpoint":"FF","clusterId":"BBBB","attributeId":"0002"}},{"id":"illuminance_sensor","reportKey":{"endpoint":"01","clusterId":"0106","attributeId":"0000"}},{"id":"level_control","group":"Playback","label":"Volume","arguments":{"command":"setVolume|{value:dec}","min":0,"max":32768},"reportKey":{"endpoint":"FF","clusterId":"BBBB","attributeId":"0003"}},{"id":"player_src_root","group":"Playback","reportKey":{"endpoint":"FF","clusterId":"BBBB","attributeId":"0004"}},{"id":"player_control_root","group":"Playback","arguments":{"commandOn":"playSound|{value}","commandOff":"killSound|0"},"reportKey":{"endpoint":"FF","clusterId":"BBBB","attributeId":"0005"}}]')},183:function(e){e.exports=JSON.parse('[{"modelIds":["ZESP_Root"],"image":"zesp.jpg","controls":"root.json"},{"modelIds":["lumi.sensor_switch"],"image":"default-sensor-switch.jpg"},{"modelIds":["lumi.sensor_motion"],"image":"default-sensor-motion.jpg"},{"modelIds":["lumi.sensor_magnet"],"image":"default-sensor-magnet.jpg"}]')},197:function(e){e.exports=JSON.parse('{"10":"BOOL","18":"MAP8","19":"MAP16","20":"UINT8","21":"UINT16","22":"UINT24","23":"UINT32","24":"UINT40","25":"UINT48","26":"UINT56","27":"UINT64","28":"IINT8","29":"INT16","30":"ENUM8","31":"ENUM16","38":"SEMI","39":"SINGLE","41":"OCTSTR","42":"STRING","43":"OCTSTR16","44":"STRING16","48":"ARRAY","50":"SET","51":"BAG","00":"NODATA","08":"DATA8","09":"DATA16","0a":"DATA24","0b":"DATA32","0c":"DATA40","0d":"DATA48","0e":"DATA56","0f":"DATA64","1a":"MAP24","1b":"MAP32","1c":"MAP40","1d":"MAP48","1e":"MAP56","1f":"MAP64","2a":"INT24","2b":"INT32","2c":"INT40","2d":"INT48","2e":"INT56","2f":"INT64","3a":"DOUBLE","4c":"STRUCT","e0":"ToD","e1":"DATE","e2":"UTC","e8":"CLUSTERID","e9":"ATTRIBID","ea":"BACOID","f0":"EUI164","f1":"KEY128","ff":"UNK"}')},205:function(e,t,n){},206:function(e,t,n){console.debug=function(){}},228:function(e,t,n){var a={"./config":121,"./config.js":121,"./locales/en/common":146,"./locales/en/common.json":146,"./locales/en/nav":147,"./locales/en/nav.json":147,"./locales/en/pages/devices":148,"./locales/en/pages/devices.json":148,"./locales/en/pages/setup-mqtt":149,"./locales/en/pages/setup-mqtt.json":149,"./locales/en/pages/setup-wifi":150,"./locales/en/pages/setup-wifi.json":150,"./locales/en/pages/welcome":151,"./locales/en/pages/welcome.json":151};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=228},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},346:function(e,t,n){},347:function(e){e.exports=JSON.parse('{"default":{"titles":{"onTrue":"True","onFalse":"False"},"icons":{"onTrue":"bi-check-circle","onFalse":"bi-slash-circle"},"styles":{"onTrue":"status-primary","onFalse":"status-secondary"}},"door":{"titles":{"onTrue":"Opened","onFalse":"Closed"},"icons":{"onTrue":"bi-door-open","onFalse":"bi-door-closed"}},"motion":{"titles":{"onTrue":"Detected","onFalse":"No motion"},"icons":{"onTrue":"bi-soundwave","onFalse":"bi-fullscreen"}}}')},348:function(e,t,n){var a={"./root":177,"./root.json":177};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=348},360:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(24),s=n.n(r),o=(n(205),n(206),n(207),n(121),n(3)),i=n(15),l=n(17),d=(n(229),n(230),n(231),n(387)),u=n(381),m=n(9),b=n(28),j={spinnerShow:!1,spinnerMessage:"Loading..."},O=Object(b.b)({name:"spinner",initialState:j,reducers:{setSpinnerShow:function(e,t){e.spinnerShow=t.payload,e.spinnerShow&&(e.spinnerMessage=j.spinnerMessage)},setSpinner:function(e,t){e.spinnerShow=t.payload.show,e.spinnerMessage=t.payload.message||j.spinnerMessage}}}),f=function(e){return e.spinner},p=O.actions,v=p.setSpinnerShow,E=p.setSpinner,h=O.reducer,g=n(1),I=function(e){var t=e.message;return Object(g.jsx)(d.a,{show:!0,centered:!0,size:"sm",backdrop:!0,children:Object(g.jsx)(d.a.Body,{children:Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsx)(u.a,{animation:"border",variant:"primary",className:"me-3"}),Object(g.jsx)("div",{children:t})]})})})},N=function(){var e=Object(m.c)(f),t=e.spinnerShow,n=e.spinnerMessage,c=Object(a.useState)(t),r=Object(o.a)(c,2),s=r[0],i=r[1],l=Object(a.useRef)();return Object(a.useEffect)((function(){l.current&&(clearTimeout(l.current),l.current=void 0),t?l.current=setTimeout((function(){return i(!0)}),1e3):i(!1)}),[t]),Object(g.jsx)(d.a,{show:s,centered:!0,size:"sm",backdrop:!0,children:Object(g.jsx)(d.a.Body,{children:Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsx)(u.a,{animation:"border",variant:"primary",className:"me-3"}),Object(g.jsx)("div",{children:n})]})})})},T=n(13),x=(n(238),function(e){var t=Object(a.useState)("show-transition hidden"),n=Object(o.a)(t,2),c=n[0],r=n[1];return setTimeout((function(){return r("show-transition")}),0),Object(g.jsx)("div",{className:"".concat(c," ").concat(e.className),children:e.children})}),S=(n(239),n(23)),R=Object(b.b)({name:"zesp",initialState:{connectionStatus:"disconnected",initialized:!1},reducers:{setConnectionStatus:function(e,t){e.connectionStatus=t.payload},setInitialized:function(e,t){e.initialized=t.payload}}}),A=function(e){return e.zesp.connectionStatus},C=function(e){return e.zesp.initialized},y=R.actions,L=y.setConnectionStatus,M=y.setInitialized,P=R.reducer,w=n(2),D=function e(t){return{name:e.name,isValid:function(e){if("json"!==e.dataType)return!1;var n=e.dataParts[0];return/\/(.+)\.json/gi.exec(n)[1]===t}}},U=function e(t){return{name:e.name,isValid:function(e){return e.dataType===t}}},_=function e(t,n,a,c){return{name:e.name,isValid:function(e){if(!e.dataType||"rep"!==e.dataType)return!1;if(e.dataParts.length<1)return!1;var r=JSON.parse(e.dataParts[0]);return!(!r.ShortAddr||r.ShortAddr!==t)&&(!(!r.EndPoint||r.EndPoint!==n)&&(!(!r.ClusterId||r.ClusterId!==a)&&!(!r.AttribId||r.AttribId!==c)))}}},V={name:"AllZespResponseValidator",isValid:function(e){return!0}},k=n(183),H=n(41),F=n(382),z=n(383),B=n(184),G=function(e){if(!e.config.reportKey)return console.debug("No report key in config found for ".concat(e.deviceInfo.zespInfo.IEEE," device and ").concat(e.config.id," control")),null;var t=e.config.reportKey.endpoint+e.config.reportKey.clusterId+e.config.reportKey.attributeId;return e.deviceInfo.zespInfo.Report[t]},W=function(e,t){var n,a=null===(n=e.deviceInfo.customLayout)||void 0===n?void 0:n.find((function(e){return e.id===t}));return[a,a&&a.reportKey?e.deviceInfo.zespInfo.Report[a.reportKey.endpoint+a.reportKey.clusterId+a.reportKey.attributeId]:void 0]},Y=function(e){var t=Object(a.useContext)(It).zespSend,n=G(e);return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{children:"Light power:"}),Object(g.jsx)(be,{children:Object(g.jsxs)(z.a,{children:[Object(g.jsx)(B.a,{variant:"1"===(null===n||void 0===n?void 0:n.val.toString())?"primary":"secondary",onClick:function(){t({data:e.config.arguments.commandOn,isBinary:!0})},children:"ON"}),Object(g.jsx)(B.a,{variant:"1"===(null===n||void 0===n?void 0:n.val.toString())?"secondary":"primary",onClick:function(){t({data:e.config.arguments.commandOff,isBinary:!0})},children:"OFF"})]})})]})},Z=n(185),J=n(64),K=function(e){var t=Object(a.useContext)(It).zespSend,n=G(e),c=(null===n||void 0===n?void 0:n.val)?Number(n.val):(e.config.arguments.max-e.config.arguments.min)/2+e.config.arguments.min,r=Object(a.useState)(c),s=Object(o.a)(r,2),i=s[0],l=s[1],d={min:e.config.arguments.min,max:e.config.arguments.max},u=function(t){return Math.max(Math.min(e.config.arguments.max,t),e.config.arguments.min)};return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{children:"Level:"}),Object(g.jsxs)(be,{children:[Object(g.jsx)(Z.a,Object(w.a)({style:{width:"80px"},className:"me-2",type:"number",value:i,onChange:function(n){return function(n){var a=u(n);l(a);var c=e.config.arguments.command.replace("{value}",a.toString(16));t({data:c})}(Number(n.target.value))}},d)),Object(g.jsx)(J.a,Object(w.a)({value:i,onChange:function(e){return l(Number(e.target.value))},onMouseUp:function(){var n=u(i),a=e.config.arguments.command.replace("{value}",n.toString(16));t({data:a})}},d))]})]})},X=n(116);function q(e,t){var n=function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),a),t}},c=Object(a.useState)(n),r=Object(o.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){i(n())}),[]),Object(a.useEffect)((function(){var e=function(){i(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[s,function(t){"undefined"==typeof window&&console.warn("Tried setting localStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{var n=t instanceof Function?t(s):t;window.localStorage.setItem(e,JSON.stringify(n)),i(n),window.dispatchEvent(new Event("local-storage"))}catch(a){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),a)}}]}var Q=function(e){var t=Object(a.useContext)(It).zespSend,n=G(e),c=(null===n||void 0===n?void 0:n.val)?null===n||void 0===n?void 0:n.val.split(":").map((function(e){return Number(e)})):[255,255,255];3!==c.length&&(console.warn("Incorrect RGB value stored to reportd: ".concat(null===n||void 0===n?void 0:n.val)),c=[255,255,255]);var r=Object(a.useState)({r:c[0],g:c[1],b:c[2]}),s=Object(o.a)(r,2),i=s[0],l=s[1],d=q("colorPicker",1),u=Object(o.a)(d,2),m=u[0],b=u[1],j=function(n){l(n);var a=$(n),c=Object(o.a)(a,2),r=c[0],s=c[1],i=e.config.arguments.command.replace("{x}",r.toString(16));i=i.replace("{y}",s.toString(16)),t({data:i})},O=function(e){return Object(g.jsx)("button",{className:"btn btn-outline-secondary me-1 btn-xs ".concat(m==e?"active":""),type:"button",onClick:function(){return b(e)},children:e})};return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{className:"user-select-none",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Light color:"}),Object(g.jsxs)("div",{children:[O(1),O(2),O(3)]})]})}),Object(g.jsx)(be,{children:Object(g.jsxs)("div",{className:"flex-grow-1",children:[1===m&&Object(g.jsx)(X.c,{color:i,onChange:function(e){return l(e.rgb)},onChangeComplete:function(){var n=$(i),a=Object(o.a)(n,2),c=a[0],r=a[1],s=e.config.arguments.command.replace("{x}",c.toString(16));s=s.replace("{y}",r.toString(16)),t({data:s})},width:"270px"}),2===m&&Object(g.jsx)(X.b,{color:i,onChange:function(e){return j(e.rgb)},triangle:"hide",width:"214px"}),3===m&&Object(g.jsx)(X.a,{color:i,onChange:function(e){return j(e.rgb)}})]})})]})},$=function(e){var t=e.b>.04045?Math.pow((e.b+.055)/1.055,2.4):e.b/12.92,n=e.g>.04045?Math.pow((e.g+.055)/1.055,2.4):e.g/12.92,a=e.r>.04045?Math.pow((e.r+.055)/1.055,2.4):e.r/12.92,c=.664511*t+.154324*n+.162028*a,r=.283881*t+.668433*n+.047685*a,s=88e-6*t+.07231*n+.986039*a,o=c/(c+r+s),i=r/(c+r+s);return isNaN(o)&&(o=0),isNaN(i)&&(i=0),[Number((65279*o).toFixed(0)),Number((65279*i).toFixed(0))]},ee=function(e){var t,n=Object(a.useState)(),c=Object(o.a)(n,2),r=c[0],s=c[1];return!0===e.onRefresh&&Object(a.useEffect)((function(){return s(e.classNameFrom)}),[null===(t=e.children)||void 0===t?void 0:t.toString()]),!1===e.onLoad&&Object(a.useEffect)((function(){return s(e.classNameTo)}),[]),setTimeout((function(){return s(e.classNameTo)}),e.timeOutMs||100),Object(g.jsx)("span",{className:r,children:e.children})},te=function(e){return Object(g.jsx)(ee,{classNameFrom:"highlight-value just-added",classNameTo:"highlight-value",onRefresh:!0,onLoad:!1,children:e.children})},ne=function(e){var t,n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=JSON.stringify(e.config),l=JSON.stringify(G(e)),d=G(e);if(!d)return Object(g.jsx)(ae,{id:e.config.id,reportData:l,configData:i});var u=d.label||e.config.name||e.config.id||"Unknown data",m=d.parsed&&d.parsed.toString().trim()===d.val.toString().trim()&&d.parsed||d.parsed&&d.val&&"".concat(d.parsed," (").concat(d.val,")")||d.val||"No data",b=null===(t=d.role)||void 0===t?void 0:t.split("&"),j=b&&b.length>1&&JSON.parse(b[1]),O=j&&j.unit_of_measurement||"";return Object(g.jsxs)(F.a,{children:[Object(g.jsxs)(me,{children:[u,":"]}),Object(g.jsxs)(be,{children:[Object(g.jsxs)(te,{children:[m," ",O]}),Object(g.jsx)("a",{onClick:function(e){e.preventDefault(),s(!r)},href:"#",className:"value-info",title:"Unrecognized data, click to show details",children:Object(g.jsx)("i",{className:"bi bi-info-circle-fill ms-2 text-secondary"})})]}),Object(g.jsxs)("div",{className:"alert alert-info flex-column col-12 ".concat(r?"":"d-none"),children:[Object(g.jsx)("div",{children:i}),l&&Object(g.jsx)("div",{className:"mt-2",children:l})]})]})},ae=function(e){return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{children:e.id}),Object(g.jsx)(be,{children:Object(g.jsxs)("div",{className:"alert alert-info",children:[Object(g.jsx)("div",{children:e.configData}),e.reportData&&Object(g.jsx)("div",{className:"mt-2",children:e.reportData})]})})]})},ce=function(e){var t=G(e),n=(null===t||void 0===t?void 0:t.val)?parseInt(t.val,16).toString():null;return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{children:"Illuminance:"}),Object(g.jsxs)(be,{children:[n&&Object(g.jsx)(te,{children:n}),!n&&Object(g.jsx)("span",{className:"alert alert-warning small py-2 m-0",children:"No data"})]})]})},re=function(e){var t=Object(a.useContext)(It).zespSend,n={min:e.config.arguments.min,max:e.config.arguments.max},c=G(e),r=(null===c||void 0===c?void 0:c.parsed)?Number(c.parsed):(n.max-n.min)/2+n.min,s=Object(a.useState)(r),i=Object(o.a)(s,2),l=i[0],d=i[1],u=function(t){return Math.max(Math.min(e.config.arguments.max,t),e.config.arguments.min)},m=function(n){var a=se(e.config.arguments.command,n,e);t({data:a})},b=(null===c||void 0===c?void 0:c.label)||e.config.name||"Level";return Object(g.jsxs)(F.a,{children:[Object(g.jsxs)(me,{children:[b,":"]}),Object(g.jsxs)(be,{children:[Object(g.jsx)(Z.a,Object(w.a)({style:{width:"100px"},className:"me-2 text-center",type:"number",value:l,onChange:function(e){return function(e){var t=u(e);d(t),m(t)}(Number(e.target.value))}},n)),Object(g.jsx)(J.a,Object(w.a)({value:l,onChange:function(e){return d(Number(e.target.value))},onMouseUp:function(){var e=u(l);m(e)}},n))]})]})},se=function(e,t,n){return e.replace("{device}",n.deviceInfo.zespInfo.Device).replace("{value}",t.toString(16)).replace("{value:dec}",t.toString())},oe=function(e){var t=Object(a.useContext)(It).zespSend,n=G(e),c=W(e,"player_control_root"),r=Object(o.a)(c,2),s=r[0],i=r[1];if(!n)return Object(a.useEffect)((function(){T.b.error("'".concat(e.config.id,"' layout settings not found"))}),[]),Object(g.jsx)(g.Fragment,{});if(!i)return Object(a.useEffect)((function(){T.b.error("'player_control_root' layout settings not found")}),[]),Object(g.jsx)(g.Fragment,{});var l=Object(a.useState)(n.val||""),d=Object(o.a)(l,2),u=d[0],m=d[1],b=Object(a.useState)(i.val||"OFF"),j=Object(o.a)(b,2),O=j[0],f=j[1];return Object(g.jsxs)(F.a,{children:[Object(g.jsx)(me,{children:"Radio stream:"}),Object(g.jsx)(be,{children:Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsx)("input",{className:"form-control",list:"datalistOptions",placeholder:"Click to see dropdown suggestions",value:u,onChange:function(e){var t=e.target.value;m(t)}}),Object(g.jsx)("button",{className:"btn btn-outline-secondary ".concat("ON"!==O?"active":""),type:"button",onClick:function(){f("OFF"),m(""),s?t({data:s.arguments.commandOff}):console.warn("No configured OFF command for 'player_control_root' operation found in layout")},children:Object(g.jsx)("i",{className:"bi-stop"})}),Object(g.jsx)("button",{className:"btn btn-outline-secondary rounded-end ".concat("ON"===O?"active":""),type:"button",onClick:function(){u&&0!==u.length?(f("ON"),s?t({data:s.arguments.commandOn.replace("{value}",u)}):console.warn("No configured ON command for 'player_control_root' operation found in layout")):T.b.error("Please select source first",{icon:"\ud83c\udfb5"})},children:Object(g.jsx)("i",{className:"bi-play"})}),Object(g.jsx)("datalist",{id:"datalistOptions",children:["http://chanson.hostingradio.ru:8041/chanson128.mp3","http://dorognoe.hostingradio.ru:8000/radio?type=.mp3","http://stream3.radiostyle.ru:8001/biker-fm","http://air.radiorecord.ru:8102/sd90_320","http://stream.hitroe.com/stream","http://air.radiorecord.ru:8102/tm_320","http://eu.radioboss.fm:8024/stream","http://listen.181fm.com/181-thebox_128k.mp3?","http://stream.live.vc.bbcmedia.co.uk/bbc_radio_one"].map((function(e,t){return Object(g.jsx)("option",{value:e},t)}))})]})})]})},ie=function(e){var t,n,a,c=G(e);if(!c)return Object(g.jsx)("div",{className:"alert alert-warning",children:"Report missed"});var r=Number((null===(t=e.config.zespRoleSettings.payload_on)||void 0===t?void 0:t.toString())||"0"),s=Number((null===(n=c.parsed)||void 0===n?void 0:n.toString())||(null===(a=c.val)||void 0===a?void 0:a.toString())||"1")===r;return Object(g.jsxs)(F.a,{children:[Object(g.jsxs)(me,{children:[c.label||"State",":"]}),Object(g.jsx)(be,{children:Object(g.jsx)(te,{children:s?"ON":"OFF"})})]})},le=function(e){var t=G(e);if(!t)return Object(g.jsx)("div",{className:"alert alert-warning",children:"Report missed"});var n=t.parsed||t.val,a=e.config.zespRoleSettings&&e.config.zespRoleSettings.unit_of_measurement||"";return Object(g.jsxs)(F.a,{children:[Object(g.jsxs)(me,{children:[t.label||"Value",":"]}),Object(g.jsx)(be,{children:Object(g.jsx)(te,{children:n?"".concat(n," ").concat(a):"No data"})})]})},de=n(190),ue=function(e){var t=Object(a.useContext)(It).zespSend,n=G(e),c=(null===n||void 0===n?void 0:n.label)||e.config.name||"Power";return Object(g.jsxs)(F.a,{children:[Object(g.jsxs)(me,{children:[c,":"]}),Object(g.jsx)(be,{children:Object(g.jsxs)(z.a,{children:[Object(g.jsx)(B.a,{variant:"1"===(null===n||void 0===n?void 0:n.parsed.toString())?"primary":"secondary",onClick:function(){var n=e.config.arguments.commandOn.replace("{device}",e.deviceInfo.zespInfo.Device);t({data:n,isBinary:!0})},children:"ON"}),Object(g.jsx)(B.a,{variant:"secondary",onClick:function(){var n=e.config.arguments.commandToggle.replace("{device}",e.deviceInfo.zespInfo.Device);t({data:n,isBinary:!0})},children:"Toggle"}),Object(g.jsx)(B.a,{variant:"0"===(null===n||void 0===n?void 0:n.parsed.toString())?"primary":"secondary",onClick:function(){var n=e.config.arguments.commandOff.replace("{device}",e.deviceInfo.zespInfo.Device);t({data:n,isBinary:!0})},children:"OFF"})]})})]})},me=function(e){return Object(g.jsx)(de.a,{md:"4",children:e.children})},be=function(e){return Object(g.jsx)(de.a,{children:e.children})},je=function(e){var t=[],n=[];e.settings.forEach((function(c){var r=function(e,t){var n={config:e,deviceInfo:t};switch(e.id){case"on_off_root":return{type:"regular",element:Object(g.jsx)(Y,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"level_root":return{type:"regular",element:Object(g.jsx)(K,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"rgb_root":return{type:"regular",element:Object(g.jsx)(Q,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"player_src_root":return{type:"regular",element:Object(g.jsx)(oe,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"player_control_root":return{type:"skip",element:Object(g.jsx)(a.Fragment,{})};case"level_control":return{type:"regular",element:Object(g.jsx)(re,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"illuminance_sensor":return{type:"regular",element:Object(g.jsx)(ce,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"binary_sensor":return{type:"regular",element:Object(g.jsx)(ie,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"sensor":return{type:"regular",element:Object(g.jsx)(le,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};case"on_off_toggle":return{type:"regular",element:Object(g.jsx)(ue,Object(w.a)(Object(w.a)({},n),{},{config:n.config}))};default:return{type:"unknown",element:Object(g.jsx)(ne,Object(w.a)({},n))}}}(c,e.device);"skip"!==r.type&&("unknown"===r.type?n.push(r.element):t.push(r.element))}));var c=Object(a.useState)(0===t.length),r=Object(o.a)(c,2),s=r[0],i=r[1];return Object(g.jsxs)("div",{className:"default-layout",children:[t.length>0&&Object(g.jsx)("div",{className:"elements",children:t.map((function(e,t){return Object(g.jsx)("div",{className:"device-control-group",children:e},t)}))}),n.length>0&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("button",{onClick:function(){i(!s)},className:"show-unknown-btn btn btn-outline-info",children:["Unknown reports (",n.length,")"]}),Object(g.jsx)("div",{className:"elements unknown ".concat(s?"show":"hide"),children:n.map((function(e,t){return Object(g.jsx)("div",{className:"device-control-group",children:e},t)}))})]})]})},Oe=(n(346),["0100060000","0104060000"]),fe=["010000FF02"],pe=n(347),ve=[2.7,3.1],Ee=function(e){var t=ge(Oe,e);if(!t)return{iconClassName:pe.default.icons.onFalse,valueClassName:"status-unknown",valueTitle:"Unknown"};var n=t.parsed||t.val,a=t.role&&t.role.split("&"),c=a&&a.length>1?JSON.parse(a[1]):void 0,r=c&&c.payload_on?n===c.payload_on:"1"===n||"01"===n,s=c&&c.device_class||"default",o=Object(w.a)(Object(w.a)({},pe.default),pe[s]);return{iconClassName:r?"".concat(o.icons.onTrue," ").concat(o.styles.onTrue):"".concat(o.icons.onFalse," ").concat(o.styles.onFalse),valueClassName:"status ".concat(r?o.styles.onTrue:o.styles.onFalse),valueTitle:r?o.titles.onTrue:o.titles.onFalse}},he=function(e){var t,n=ge(fe,e);if(!n)return{stateClassName:"??",valueTitle:"-",valuePercents:0};var a=null===(t=n.role)||void 0===t?void 0:t.split("&"),c=a&&a.length>1?JSON.parse(a[1]):void 0,r=c&&c.unit_of_measurement||"",s=Number(n.parsed||n.val)||void 0,o=void 0;if(s)if("%"===r)o=Number(s);else{var i=Number(s)||void 0;i&&(i=Math.min(ve[1],Math.max(ve[0],i)),o=Math.round(100*(1-(ve[1]-i)/(ve[1]-ve[0]))))}else o=void 0;var l=c&&c.device_class||"default",d=Object(w.a)(Object(w.a)({},pe.default),pe[l]),u="".concat(s||"??"," ").concat(r);return{stateClassName:o?o<=50?d.styles.onFalse:d.styles.onTrue:"status-unknown",valuePercents:o||0,valueTitle:u}},ge=function(e,t){var n,a=Object(H.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value,r=t.device.zespInfo.Report[c];if(r)return r}}catch(s){a.e(s)}finally{a.f()}},Ie={default:je,binarySensorLayout:function(e){var t=Ee(e),n=he(e);return Object(g.jsxs)("div",{className:"row custom-binary-layout",children:[Object(g.jsx)("div",{className:"col col-5 left",children:Object(g.jsx)("i",{className:"bi ".concat(t.iconClassName)})}),Object(g.jsxs)("div",{className:"col right flex-column justify-content-center",children:[Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("div",{children:"Current status:"}),Object(g.jsx)("div",{className:t.valueClassName,children:t.valueTitle})]}),Object(g.jsxs)("div",{className:"text-center mt-3 w-100",children:[Object(g.jsxs)("div",{children:["Battery Level: ",Object(g.jsx)("span",{className:"status ".concat(n.stateClassName),children:n.valueTitle})]}),Object(g.jsx)("div",{className:"progress mt-3",children:Object(g.jsx)("div",{className:"progress-bar ".concat(n.stateClassName),role:"progressbar",style:{width:"".concat(n.valuePercents,"%")}})}),Object(g.jsx)("div",{className:"battery-icon",children:Object(g.jsx)("i",{className:"bi bi-battery-half ".concat(n.stateClassName)})})]})]})]})},bleBeacon:function(e){var t,n,c="1"===(null===(t=e.device.zespInfo.Report.ble_InRange)||void 0===t?void 0:t.parsed),r=null===(n=e.device.zespInfo.Report.ble_signal_level)||void 0===n?void 0:n.parsed,s=Math.max(e.device.zespInfo.Report.ble_InRange.time,e.device.zespInfo.Report.ble_signal_level.time),i=new Date(s),l=function(){return Math.round((Date.now()-s)/1e3)},d=Object(a.useState)(l()),u=Object(o.a)(d,2),m=u[0],b=u[1];Object(a.useEffect)((function(){var e=setInterval((function(){b(l())}),1e3);return function(){clearInterval(e)}}),[s]);var j=m<300?"status-primary":"status-unknown",O=c?"status-primary":"status-unknown";return Object(g.jsxs)("div",{className:"row custom-layout",children:[Object(g.jsxs)("div",{className:"col col-5 left flex-column position-relative",children:[Object(g.jsx)("i",{className:"bi bi-wifi ".concat(O)}),Object(g.jsx)("div",{className:"icon-description ".concat(O),children:c?"In range":"Out of range"})]}),Object(g.jsxs)("div",{className:"col right flex-column justify-content-center",children:[Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("div",{children:"Signal level:"}),Object(g.jsx)("div",{className:"status ".concat(O),children:Object(g.jsx)(te,{children:r})})]}),Object(g.jsxs)("div",{className:"text-center mt-3",children:[Object(g.jsx)("div",{children:"Last update:"}),Object(g.jsxs)("div",{className:"status ".concat(j),children:[i.toLocaleDateString()," ",i.toLocaleTimeString()]}),Object(g.jsx)("div",{className:"small text-muted opacity-50",children:m<60?"".concat(m," seconds ago"):m/60<60?"".concat(Math.round(m/60)," minutes ago"):"".concat(Math.round(m/60/60)," hours ago")})]})]})]})}},Ne=[function(e){var t=Te.getReport(Oe,e),n=Te.getReport(fe,e);if(t&&n&&Te.roleDeviceClassIs(["battery"],n)&&Te.roleDeviceClassIs(["door","motion"],t))return console.debug("Auto detected layout 'binarySensorLayout' for '".concat(e.IEEE,"'")),"binarySensorLayout"},function(e){if("BED"===e.DevType&&"beacon"===e.class){var t=Te.getReport(["ble_InRange"],e),n=Te.getReport(["ble_signal_level"],e);if(t&&n)return"bleBeacon"}}],Te={autoDetect:function(e){var t,n=Object(H.a)(Ne);try{for(n.s();!(t=n.n()).done;){var a=(0,t.value)(e);if(a)return a}}catch(c){n.e(c)}finally{n.f()}},roleDeviceClassIs:function(e,t){var n=t.role&&t.role.split("&");if(n.length<2)return!1;var a=JSON.parse(n[1]).device_class;return!!a&&e.indexOf(a)>=0},getReport:function(e,t){var n,a=Object(H.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value,r=t.Report[c];if(r)return r}}catch(s){a.e(s)}finally{a.f()}}},xe={getDevicesListAsync:function(e){return new Promise((function(t,n){e.zespRequestAsync({data:"getDeviceList",responseValidator:U("alldev")}).then((function(e){var n=Se(e);t({devices:n,zespVersion:e.dataParts.length>1?e.dataParts[1]:void 0})})).catch((function(e){return n(e)}))}))},subscribeListUpdate:function(e,t){e.subscribe(U("alldev"),(function(e){var n=Se(e);t(n)}))}},Se=function(e){var t=e.dataParts[0],n=[];return Object.assign(n,JSON.parse(t)),n.map(Ae)},Re=function(e){var t=k.find((function(t){return t.modelIds.findIndex((function(t){return t===e}))>=0}))||{};return{settings:t,controls:(null===t||void 0===t?void 0:t.controls)&&n(348)("./".concat(t.controls))||[]}},Ae=function(e){var t=Re(e.ModelId),n=t.settings,a=t.controls;a.forEach((function(t){if(t.reportKey){var n=t.reportKey.endpoint+t.reportKey.clusterId+t.reportKey.attributeId;e.Report[n]||(e.Report[n]={})}}));var c=n.layout||Te.autoDetect(e);return{zespInfo:e,settings:Object(w.a)(Object(w.a)({},n),{layout:c}),customLayout:a}},Ce=xe,ye=n(12),Le=Object(b.b)({name:"devices",initialState:{devices:[]},reducers:{setDevices:function(e,t){e.devices=t.payload},updateDevices:function(e,t){var n=e.devices.find((function(e){return"ZESP_Root"===e.zespInfo.ModelId}));if(n){var a=t.payload.filter((function(e){return"ZESP_Root"!==e.zespInfo.ModelId}));e.devices=[n].concat(Object(S.a)(a))}else e.devices=t.payload},updateDevice:function(e,t){var n=e.devices.findIndex((function(e){return e.zespInfo.IEEE===t.payload.zespInfo.IEEE}));n<0?e.devices.push(t.payload):e.devices[n]=t.payload},updateZespInfo:function(e,t){var n=e.devices.findIndex((function(e){return e.zespInfo.IEEE===t.payload.IEEE}));n<0?console.warn("Cannot update zesp data, cause device information not found"):e.devices[n].zespInfo=t.payload},updateReport:function(e,t){var n=e.devices.find((function(e){return e.zespInfo.IEEE===t.payload.ieee}));n?n.zespInfo.Report[t.payload.reportKey]=Object(w.a)(Object(w.a)({},n.zespInfo.Report[t.payload.reportKey]),t.payload.update):console.warn("Device '".concat(t.payload.ieee,"' not found to update"))},updateRootReports:function(e,t){var n=e.devices.find((function(e){return"ZESP_Root"===e.zespInfo.ModelId}));n?n.zespInfo.Report=Object(w.a)(Object(w.a)({},n.zespInfo.Report),t.payload):console.warn("Root device not found to update")},updateReportsOrder:function(e,t){var n=e.devices.find((function(e){return e.zespInfo.IEEE===t.payload.ieee}));n?n.zespInfo.Report=t.payload.orderedReportKeys.reduce((function(e,t){return Object(w.a)(Object(w.a)({},e),{},Object(ye.a)({},t,n.zespInfo.Report[t]))}),{}):console.warn("Root device not found to update")}}}),Me=function(e,t){return e.devices.devices.find((function(e){return e.zespInfo.IEEE===t}))},Pe=function(e){return e.devices.devices||[]},we=Le.actions,De=we.setDevices,Ue=we.updateReport,_e=we.updateRootReports,Ve=we.updateDevices,ke=we.updateDevice,He=we.updateZespInfo,Fe=we.updateReportsOrder,ze=Le.reducer,Be={zespFirmwareUpdateInfo:void 0,zespFirmwareInstalledVersion:"-",zespSkipVersion:void 0},Ge=Object(b.b)({name:"zespFirmwareUpdate",initialState:Be,reducers:{setZespFirmwareUpdate:function(e,t){e.zespFirmwareUpdateInfo=t.payload},setZespFirmwareInstalledVersion:function(e,t){e.zespFirmwareInstalledVersion=t.payload}}}),We=function(e){return e.zespFirmware.zespFirmwareUpdateInfo},Ye=function(e){return e.zespFirmware.zespFirmwareInstalledVersion},Ze=Ge.actions,Je=Ze.setZespFirmwareUpdate,Ke=Ze.setZespFirmwareInstalledVersion,Xe=Ge.reducer,qe=function(e){return new Promise((function(t,n){e.zespRequestAsync({data:"get_Mi_lamp",responseValidator:U("Mi_lamp")}).then((function(e){var a=Qe(e);a?t(a):n("Cannot update root device information")})).catch((function(e){return n(e)}))}))},Qe=function(e){var t,n,a,c,r,s,o,i=Re("ZESP_Root").controls;if(0==i.length)return{};var l=JSON.parse(e.dataParts[0]),d={},u=null===(t=i.find((function(e){return"on_off_root"===e.id})))||void 0===t?void 0:t.reportKey;u?d[u.endpoint+u.clusterId+u.attributeId]={val:l.on.toString()}:console.warn("Root device report 'on_off_root' not found");var m=null===(n=i.find((function(e){return"level_root"===e.id})))||void 0===n?void 0:n.reportKey;m?d[m.endpoint+m.clusterId+m.attributeId]={val:l.level.toString()}:console.warn("Root device report 'level_root' not found");var b=null===(a=i.find((function(e){return"rgb_root"===e.id})))||void 0===a?void 0:a.reportKey;b?d[b.endpoint+b.clusterId+b.attributeId]={val:"".concat(l.B,":").concat(l.G,":").concat(l.R)}:console.warn("Root device report 'rgb_root' not found");var j=null===(c=i.find((function(e){return"level_control"===e.id})))||void 0===c?void 0:c.reportKey;j?d[j.endpoint+j.clusterId+j.attributeId]={val:l.sound.volume.toString()}:console.warn("Root device report 'level_control' not found");var O=null===(r=i.find((function(e){return"player_src_root"===e.id})))||void 0===r?void 0:r.reportKey;O?d[O.endpoint+O.clusterId+O.attributeId]={val:null===(s=l.sound.current_path)||void 0===s?void 0:s.toString()}:console.warn("Root device report 'player_src_root' not found");var f=null===(o=i.find((function(e){return"player_control_root"===e.id})))||void 0===o?void 0:o.reportKey;return f?d[f.endpoint+f.clusterId+f.attributeId]={val:l.sound.play.toString()}:console.warn("Root device report 'player_control_root' not found"),d};var $e=function(e){var t=e.zespRequestAsync,n=e.zespSend,a=function(e,t){var a="/".concat(e,".json"),c=JSON.stringify(t);n({data:"SaveJson|".concat(a,"|").concat(c)})};return{getAsync:function(){return new Promise((function(e,n){t({data:"loadConfig",responseValidator:U("jsconfig")}).then((function(e){return function(e){var t=JSON.parse(e),n={};return Object.assign(n,t),n}(e.dataParts[0])})).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))},setAsync:function(e){var n=["SaveJson","/jsconfig.txt",JSON.stringify(e)].join("|");return new Promise((function(e,a){t({data:n,responseValidator:U("ZD_RSP")}).then((function(t){"ok"===t.dataParts[1].toLocaleLowerCase()?e():a("Settings was not saved: ".concat(t.response))})).catch((function(e){return a(e)}))}))},getCustomAsync:function(e){return t({data:"LoadJson|/".concat(e,".json"),responseValidator:D(e)}).then((function(e){if(e.dataParts.length<1)throw new Error("Unexpected JSON file response from ZESP");var t=e.dataParts[1];if(t&&0!==t.length&&"null"!==t.trim().toLocaleLowerCase())return JSON.parse(t)}))},setCustom:a,setUiSettings:function(e){a("zesp_ui",e)}}},et=function(e){return e.zespRequestAsync({data:"loadfwlist",responseValidator:U("rsploadfwlist"),timeoutSeconds:15}).then((function(e){if(e.dataParts.length<2)throw Error("Unexpected zesp firmware information response");var t=JSON.parse(e.dataParts[0]),n=e.dataParts[1];if(!t||0===t.length)throw Error("Unexpected zesp firmware udpates response");if(!n||0===n.length)throw Error("Unexpected zesp current version response");return{currentVersion:n,updatesInformation:t[0]}}))},tt={},nt={zespSettings:void 0,uiSettings:void 0},at=Object(b.b)({name:"settings",initialState:nt,reducers:{setZespSettings:function(e,t){e.zespSettings=t.payload},setUiSettings:function(e,t){e.uiSettings=t.payload}}}),ct=function(e){return e.settings.zespSettings},rt=function(e){return e.settings.uiSettings},st=at.actions,ot=st.setZespSettings,it=st.setUiSettings,lt=at.reducer,dt=function(e,t){e.subscribe(U("rep"),(function(e){return ut(e,t)}))},ut=function(e,t){if(e.dataParts.length<2)return console.warn("Unknown format of updated received"),void console.warn(e.response);var n=e.dataParts[1],a=JSON.parse(e.dataParts[0]);t(n,a.EndPoint+a.ClusterId+a.AttribId,{parsed:a.parsed,val:a.Data,time:a.time})},mt=function(e,t){var n=Object(a.useRef)({});return{connectAsync:function(n){return t.connectAsync(n,(function(t){return e(L(t))}),!1)},getDevices:function(){return Ce.getDevicesListAsync(t).then((function(t){e(De(t.devices)),t.zespVersion&&e(Ke(t.zespVersion))}))},getRoot:function(){return qe(t).then((function(t){e(_e(t)),console.debug("Root device reports updated")}))},readUiSettings:function(){return $e(t).getCustomAsync("zesp_ui").then((function(t){var a=t||tt;e(it(a)),n.current=a}))},readFirmwareUpdates:function(){var a=n.current;if(!a)throw new Error("Read UI settings before firmware checking");return a.firmwareUpdate&&a.firmwareLastCheck&&Date.now()-a.firmwareLastCheck<864e5?(e(Je(a.firmwareUpdate)),console.debug("Firmware information read from settings"),Promise.resolve()):(et(t).then((function(a){e(Ke(a.currentVersion)),e(Je(a.updatesInformation)),n.current=Object(w.a)(Object(w.a)({},n.current),{firmwareUpdate:a.updatesInformation,firmwareLastCheck:Date.now()}),$e(t).setCustom("zesp_ui",n.current),e(it(n.current)),console.debug("Firmware updates information loaded")})).catch((function(e){console.warn("Cannot read Firmware update information"),console.warn(e)})),Promise.resolve())},subscribeReportUpdates:function(){return dt(t,(function(t,n,a){return e(Ue({ieee:t,reportKey:n,update:a}))})),Promise.resolve()},subscribeDevicesListUpdate:function(){return Ce.subscribeListUpdate(t,(function(t){e(Ve(t)),console.debug("Devices list updated")})),Promise.resolve()}}},bt=n(191),jt={ConnectionStartTimeout:100,RestartConnectionTimeout:5e3,DefaultRequestTimeoutSeconds:5,WatcherIntervalSeconds:15},Ot=n(43),ft=n(62),pt=n(67),vt=n(200),Et="zesp-data-received",ht=function(e){Object(ft.a)(n,e);var t=Object(pt.a)(n);function n(e,a,c){var r;return Object(Ot.a)(this,n),(r=t.call(this,Et)).dataType=void 0,r.response=void 0,r.dataParts=void 0,r.dataType=e,r.dataParts=a,r.response=c,r}return n}(Object(vt.a)(Event)),gt=function(){var e,t=new EventTarget,n=void 0,a=Date.now(),c=void 0,r=function(e,n){a=Date.now();var c=n.data.replace(/\|(?=([^"]*"[^"]*")*[^"]*$)/gi,"\0").split("\0");if(0!=c.length){var r=c.shift();/\/(.+)\.json/gi.exec(r)&&(c.unshift(r),r="json");var s=new ht(r,c,n.data);t.dispatchEvent(s)}else console.warn("Received empty message from zesp")},s=function e(t){return c&&(console.debug("Stop old watcher"),clearInterval(c)),console.debug("Start watcher"),c=setInterval((function(){var r,s;1===(null===(r=n)||void 0===r||null===(s=r.underlyingWebsocket)||void 0===s?void 0:s.readyState)&&((Date.now()-a)/1e3>jt.WatcherIntervalSeconds&&(a=Date.now()+1e3*jt.DefaultRequestTimeoutSeconds,c&&clearInterval(c),i({data:"LoadJson|/ping.json",responseValidator:V}).then((function(){return e(t)})).catch((function(){return t("reconnect")}))))}),5e3),Promise.resolve()},o=function(e){if(n){var t=!0===e.isBinary?function(e){var t,n=null===(t=e.replaceAll(" ","").match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((function(e){return parseInt(e,16)}));return new Uint8Array(n)}(e.data):e.data;n.send(t)}else console.warn("WebSocket client is not initialized yet")},i=function(e){return new Promise((function(n,a){(!e.timeoutSeconds||e.timeoutSeconds<=0)&&(e.timeoutSeconds=jt.DefaultRequestTimeoutSeconds),!0!==e.isBinary&&(e.isBinary=!1);var c=!1,r=e.responseValidator,s=function e(a){var s=a;r.isValid(s)&&(c=!0,t.removeEventListener(Et,e),n(s))};try{t.addEventListener(Et,s),o({data:e.data,isBinary:e.isBinary}),setTimeout((function(){c||(t.removeEventListener(Et,s),console.warn("zesp response did not received (timeout: ".concat(e.timeoutSeconds," seconds)")),a("timeout"))}),1e3*e.timeoutSeconds)}catch(i){a("exception: ".concat(i))}}))};return{connectAsync:function(t,a,c){return e=t,new Promise((function(t,o){if(console.debug("Start WS connection..."),!c){var i,l,d,u;if(0===(null===(i=n)||void 0===i||null===(l=i.underlyingWebsocket)||void 0===l?void 0:l.readyState))return void o("Already connecting");if(1===(null===(d=n)||void 0===d||null===(u=d.underlyingWebsocket)||void 0===u?void 0:u.readyState))return console.debug("ZESP already connected, skip connection"),void t()}!function(){if(n)try{return n.close(1e3),!0}catch(e){}}(),function(t){return new Promise((function(a,c){var s="https:"===document.location.protocol?"wss":"ws",o="".concat(s,"://").concat(e.address,":81");console.debug("Create connection to ".concat(o)),n=new bt.WebsocketBuilder(o).onOpen((function(){console.debug("ZESP connected"),t("connected"),a()})).onClose((function(){console.debug("ZESP connection closed"),t("closed"),c("ZESP connection closed")})).onError((function(){return c("ZESP connection error")})).onMessage(r).build()}))}(a).then((function(){return s(a)})).then(t).catch(o)}))},zespSend:o,zespRequestAsync:i,subscribe:function(e,n){var a=function(t){var a=t;e.isValid(a)&&n(a)};return t.addEventListener(Et,a),a},unsubscribe:function(e){return t.removeEventListener(Et,e)},getServerAddress:function(){var t;return null===(t=e)||void 0===t?void 0:t.address}}},It=c.a.createContext(gt()),Nt=function(e){var t=e.server,n=e.children,c=Object(m.b)(),r=Object(m.c)(A),s=Object(a.useState)(Object(a.useContext)(It)),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(a.useRef)(void 0);Object(a.useEffect)((function(){"reconnect"===r&&(d(gt()),c(L("disconnected"))),console.debug("ZESP agent status: ".concat(r))}),[r]);var b=mt(c,l),j=b.connectAsync,O=b.getDevices,f=b.getRoot,p=b.readUiSettings,v=b.readFirmwareUpdates,E=b.subscribeReportUpdates,h=b.subscribeDevicesListUpdate;return"connected"===r?Object(g.jsx)(It.Provider,{value:l,children:n}):("closed"===r&&(u.current&&(clearTimeout(u.current),u.current=void 0),u.current=setTimeout((function(){"closed"===r?c(L("reconnect")):console.debug("Cancel restarting, cause status: ".concat(r))}),jt.RestartConnectionTimeout)),"disconnected"!==r||(c(L("connecting")),j(t).then(O).then(f).then(p).then(v).then(E).then(h).then((function(){return c(M(!0))})).catch((function(e){return console.error(e)})).finally((function(){d(l),console.debug("ZESP initialization completed")}))),Object(g.jsx)(a.Fragment,{}))},Tt=n(45),xt=function(e){return(e.customLayout&&e.customLayout.length>0?e.customLayout:Rt(e)).reduce((function(e,t){var n=t.group||"main",a=e.find((function(e){return e.name===n}));return a||(a={name:n},e.push(a)),a.settings=[].concat(Object(S.a)(a.settings||[]),[t]),e}),[])},St=function(e,t){return t&&"ZED"!==t&&"ZR"!==t?"BED"===t?(null===e||void 0===e?void 0:e.length)<1?void console.warn("Unknown format of BLE report key: '".concat(e,"'")):{endpoint:"",clusterId:e,attributeId:""}:void console.warn("Unknown device type '".concat(t,"'")):10!==(null===e||void 0===e?void 0:e.length)?void console.warn("Unknown format of Zigbee report key: '".concat(e,"'")):{endpoint:e.substr(0,2),clusterId:e.substr(2,4),attributeId:e.substr(6)}},Rt=function(e){return Object.keys(e.zespInfo.Report).map((function(t){return function(t){var n,a=St(t,e.zespInfo.DevType);if(a){var c=Tt.find((function(e){return e.clusterId==a.clusterId})),r={id:a.clusterId,reportKey:a};if(!c)return console.debug("Report key '".concat(t,"' with unregistered cluster '").concat(a.clusterId,"' received")),r;var s=null===(n=e.zespInfo.Report[t].role)||void 0===n?void 0:n.split("&");return s&&s.length>0?Object(w.a)(Object(w.a)({},r),At(s,c,t,e.zespInfo.DevType)):c.attributes&&c.attributes[a.attributeId]||r}console.warn("Cannot get report key details for '".concat(e.zespInfo.IEEE,"' device"))}(t)})).filter((function(e){return void 0!==e}))},At=function(e,t,n,a){var c=St(n,a);if(c){var r=e[0],s=e.length>1?e[1]:null,o=t.attributes&&(t.attributes["".concat(c.attributeId,":").concat(r)]||t.attributes[r])||{id:r};return s&&(o.zespRoleSettings=JSON.parse(s)),o}},Ct=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].zespInfo.Name!==t[n].zespInfo.Name)return!1;return!0},yt=function(e,t){return"ZESP_Root"===e.zespInfo.ModelId?-1:"ZESP_Root"===t.zespInfo.ModelId?1:e.zespInfo.ModelId<t.zespInfo.ModelId?-1:e.zespInfo.ModelId>t.zespInfo.ModelId?1:0},Lt=function(e,t){var n=e.zespInfo.Name&&e.zespInfo.Name.length>0?e.zespInfo.Name:e.zespInfo.ModelId,a=Mt(e,t),c=Pt(e.zespInfo.Report,e.zespInfo.DevType);return{title:n,ieee:e.zespInfo.IEEE,image:a,tags:c}},Mt=function(e,t){var n;if(null===(n=e.settings)||void 0===n?void 0:n.image)return"".concat(".","/device-images/").concat(e.settings.image);if(e.zespInfo.Img)return"http://".concat(t,":8081/").concat(e.zespInfo.Img);var a=e.zespInfo.ModelId;return"http://".concat(t,":8081/img/").concat(a,".jpg")},Pt=function(e,t){for(var n=[],a=function(){var e=r[c],a=St(e,t);if(!a)return console.warn("Cannot read report '".concat(e,"' details for '").concat(t,"' device type")),"continue";var s=Tt.find((function(e){return e.clusterId===a.clusterId}));n.push((null===s||void 0===s?void 0:s.name)||a.clusterId)},c=0,r=Object.keys(e);c<r.length;c++)a();return n.filter((function(e,t){return n.indexOf(e)==t})).sort((function(e,t){return e>t?1:-1}))},wt=n(390),Dt=function(e){var t=Object(a.useState)(e.device.image),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){var e=new Image;e.onerror=function(){r("/device-images/default.png")},e.src=c}),[]),Object(g.jsx)("div",{className:"item-image",style:{backgroundImage:"url(".concat(c,")")}})},Ut=function(e){var t=e.device,n="/devices/".concat(t.ieee);return Object(g.jsx)(de.a,{xs:12,sm:6,lg:4,xxl:3,className:"p-1",children:Object(g.jsx)(i.b,{className:"item p-3 border rounded d-block",to:n,children:Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{children:Object(g.jsx)(Dt,{device:e.device})}),Object(g.jsxs)("div",{className:"ps-2",children:[Object(g.jsx)("div",{className:"title",children:t.title}),Object(g.jsx)("div",{className:"ieee text-muted small",children:t.ieee}),t.tags.length>0&&Object(g.jsx)("div",{className:"badges small text-wrap",children:t.tags.map((function(e,t){return Object(g.jsx)("span",{className:"badge bg-secondary",children:e},t)}))})]})]})})})},_t=n(384),Vt=n(198),kt=(n(360),n(388)),Ht=function(e){var t=e.children,n=e.title,c=e.size,r=e.className,s=e.footer,i=e.forceClose,l=e.onShow,u=e.onHide,m=e.onClosed,b=e.onSubmit,j=Object(a.useState)(!0),O=Object(o.a)(j,2),f=O[0],p=O[1];Object(a.useEffect)((function(){i&&p(!1)}),[i]);var v=function(){p(!1),u&&u()},E=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.a.Header,{children:[Object(g.jsx)("div",{children:n}),Object(g.jsx)("div",{className:"text-end modal-right-buttons",children:Object(g.jsx)("button",{type:"button",className:"btn-close me-1","aria-label":"Close",onClick:v})})]}),Object(g.jsx)(d.a.Body,{className:"text-start",children:t}),s&&Object(g.jsx)(d.a.Footer,{children:s})]});return Object(g.jsxs)(d.a,{show:f,onExited:function(){m&&m()},onHide:v,onShow:l,className:r,size:c,children:[b&&Object(g.jsx)(kt.a,{onSubmit:function(e){e.preventDefault(),b&&b()},children:E}),!b&&E]})},Ft=n(393),zt=function(e){for(var t=e.onClosed,n=function(){var e=Object(a.useContext)(It),t=e.zespSend,n=e.subscribe,c=e.unsubscribe,r=Object(a.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(a.useRef)(i),u=Object(a.useState)(!1),m=Object(o.a)(u,2),b=m[0],j=m[1],O=Object(a.useRef)(b),f=Object(a.useRef)(),p=Object(a.useRef)();Object(a.useEffect)((function(){return console.debug("start pairing..."),f.current=n(U("join"),h),p.current=n(U("alldev"),g),t({data:"addDevice"}),function(){v(),E()}}),[]);var v=function(){O.current||(console.debug("stop pairing"),t({data:"addDeviceDone"}))},E=function(){f.current&&(c(f.current),f.current=void 0),p.current&&(c(p.current),p.current=void 0)},h=function(e){var t=e.dataParts[0];t.includes(": timeout")&&(t='<div class="warning">'.concat(t,"</div>"));var n=d.current+t;d.current=n,l(n)},g=function(e){v(),j(!0),O.current=!0};return{logs:i,isCompleted:b,onChannelChangedHandler:function(e){t({data:"addDevice||".concat(e)})}}}(),c=n.isCompleted,r=n.logs,s=n.onChannelChangedHandler,i=[],l=11;l<=26;l++)i.push(Object(g.jsx)("option",{children:l}));return Object(g.jsxs)(Ht,{title:"Add Zigbee device",onClosed:t,className:"add-zigbee-dialog",children:[!c&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(F.a,{className:"mb-3 align-items-center",children:[Object(g.jsx)(de.a,{children:"I'm ready to pair new devices on channels:"}),Object(g.jsx)(de.a,{xs:3,children:Object(g.jsxs)(kt.a.Select,{className:"d-inline-block",onChange:function(e){return s(e.currentTarget.value)},children:[Object(g.jsx)("option",{value:"",children:"All"}),i]})})]}),Object(g.jsx)(Ft.a,{animated:!0,striped:!0,now:100})]}),c&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("p",{children:["Pairing completed. To set device template or edit reports, click to device and choose ",Object(g.jsx)("span",{className:"badge bg-secondary",children:"Edit"})," in settings."]}),Object(g.jsx)(Ft.a,{now:100,variant:"success",label:"Completed"})]}),r.length>0&&Object(g.jsx)("div",{className:"logs",dangerouslySetInnerHTML:{__html:r}})]})},Bt=function(){var e=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return{onAddZigbeeClickedHandler:function(){c(!0)},onAddBleClickedHandler:function(){T.b.success("Not implemented yet",{icon:"\ud83d\ude05"})},showDialog:n,setShowDialog:c}}(),t=e.onAddZigbeeClickedHandler,n=e.onAddBleClickedHandler,c=e.showDialog,r=e.setShowDialog;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(_t.a,{title:"Add device",variant:"outline-secondary",children:[Object(g.jsx)(Vt.a.Item,{onClick:t,children:"Zigbee"}),Object(g.jsx)(Vt.a.Item,{onClick:n,children:"Bluetooth"})]}),c&&Object(g.jsx)(zt,{onClosed:function(){return r(!1)}})]})},Gt=n(392),Wt=function(){var e=function(){var e=Object(a.useContext)(It).getServerAddress,t=Object(m.c)(Pe,Ct),n=e()||"/",c=Object(S.a)(t).sort(yt).map((function(e){return Lt(e,n)}));return{serverAddress:n,deviceItems:c}}(),t=e.deviceItems,n=Object(Gt.a)("pages.devices").t;return 0==t.length?Object(g.jsx)("div",{children:"No devices found..."}):(console.debug("Building list of devices to show..."),Object(g.jsx)(x,{children:Object(g.jsx)("div",{className:"devices",children:Object(g.jsx)(wt.a,{children:Object(g.jsx)(wt.a.Body,{children:Object(g.jsxs)("div",{className:"group border-top pt-4",children:[Object(g.jsxs)("div",{className:"title h5 pb-2 d-flex justify-content-between align-items-center",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:n("groups.all")}),t.length>1&&Object(g.jsx)("span",{className:"badge bg-secondary ms-2",children:t.length})]}),Object(g.jsx)(Bt,{})]}),Object(g.jsx)(F.a,{className:"items",children:t.map((function(e){return Object(g.jsx)(Ut,{device:e},e.ieee)}))})]})})})})}))},Yt=n(385),Zt=n(391),Jt=function(e,t,n,a){return new Promise((function(c,r){t||r("Settings not loaded"),n(v(!0));var s=Object(w.a)(Object(w.a)({},t),e);a(s).then((function(){n(ot(s)),c(),T.b.success("Settings updated")})).catch((function(e){T.b.error("Cannot save: ".concat(e)),r(e)})).finally((function(){return n(v(!1))}))}))},Kt=function(){var e=Object(m.b)(),t=Object(a.useContext)(It),n=Object(m.c)(ct),c=$e(t).getAsync;return Object(a.useEffect)((function(){e(v(!0)),c().then((function(t){e(ot(t))})).catch((function(e){alert(e)})).finally((function(){return e(v(!1))}))}),[]),n?Object(g.jsx)(x,{children:Object(g.jsx)(Yt.a,{className:"p-0",children:Object(g.jsxs)(Zt.a,{variant:"pills",children:[Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup",exact:!0,children:"Wifi client"})}),Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup/zigbee",children:"Zigbee"})}),Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup/mqtt",children:"MQTT client"})}),Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup/telegram",children:"Telegram bot"})}),Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup/z2m",children:"Z2M client"})}),Object(g.jsx)(Zt.a.Item,{children:Object(g.jsx)(i.b,{className:"nav-link",to:"/setup/firmware",children:"Firmware manager"})}),Object(g.jsx)(Zt.a.Item,{className:"ms-auto",children:Object(g.jsxs)(i.b,{className:"nav-link",to:"/setup/zesp-ui",children:[Object(g.jsx)("i",{className:"bi bi-gear-fill"})," ZESP:UI"]})})]})})}):Object(g.jsx)(a.Fragment,{})},Xt=(n(368),function(e,t){if(!e||!t)return!1;var n=Object.keys(e.zespInfo.Report),a=Object.keys(t.zespInfo.Report);if(n.length!=a.length)return!1;for(var c=0,r=n;c<r.length;c++){var s=r[c];if(e.zespInfo.Report[s]!==t.zespInfo.Report[s])return!1}return e.zespInfo.Name===t.zespInfo.Name&&e.zespInfo.Location===t.zespInfo.Location}),qt=n(199),Qt=n(389),$t=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=e.device.zespInfo.Name||e.device.zespInfo.ModelId,i=e.groups.length>1?"with-tabs":"",l=e.groups.length>1?Object(g.jsx)("ul",{className:"nav nav-tabs",children:e.groups.map((function(t,n){return Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)("button",{type:"button",className:"btn btn-light nav-link ".concat(e.activeGroupName===t.name?"active":""),onClick:function(){return e.setActiveGroupName(t.name)},children:"main"===t.name?s:t.name})},n)}))}):Object(g.jsx)("div",{children:s}),u=Object(g.jsxs)(qt.a,{id:"popover-basic",children:[Object(g.jsx)(qt.a.Header,{as:"h3",className:"bg-danger text-light",children:"Achtung! Are you sure?"}),Object(g.jsxs)(qt.a.Body,{children:["To delete device registration, click ",Object(g.jsx)("span",{className:"text-danger",children:"Unpair device"})," one more time..."]})]});return Object(g.jsxs)(d.a.Header,{className:"".concat(i," with-buttons"),children:[Object(g.jsx)("div",{children:l}),Object(g.jsxs)("div",{className:"text-end modal-right-buttons",children:[Object(g.jsxs)(Vt.a,{className:"d-inline-block",children:[Object(g.jsx)(Vt.a.Toggle,{variant:"link",children:Object(g.jsx)("i",{className:"bi bi-three-dots-vertical"})}),Object(g.jsxs)(Vt.a.Menu,{children:[Object(g.jsx)(Vt.a.Item,{onClick:e.onSettingsHandler,children:"Settings"}),Object(g.jsx)(Vt.a.Item,{onClick:e.onReportsHandler,children:"Edit template"}),Object(g.jsx)(Qt.a,{trigger:"click",placement:"left",overlay:u,rootClose:!0,onToggle:r,children:Object(g.jsx)("button",{className:"dropdown-item",onClick:function(){c&&e.onDeleteDeviceHandler()},children:"Unpair device"})}),Object(g.jsx)(Vt.a.Divider,{}),Object(g.jsx)(Vt.a.Item,{onClick:e.onDebugDeviceHandler,children:"Debug"})]})]}),Object(g.jsx)("span",{className:"border-end mx-2"}),Object(g.jsx)("button",{type:"button",className:"btn","aria-label":"Close",onClick:e.onCloseClickHandler,children:Object(g.jsx)("i",{className:"bi bi-x-lg"})})]})]})},en=function(e){var t,n=e.groups.find((function(t){return t.name===e.activeGroupName}));if(!n)return Object(g.jsxs)("div",{children:["Group '",e.activeGroupName,"' not found."]});var a={device:e.device,settings:n.settings},c=(null===(t=e.device.settings)||void 0===t?void 0:t.layout)||"default",r=Ie[c]||je;return Object(g.jsx)(d.a.Body,{className:"text-start device-dialog p-4",children:Object(g.jsx)(r,Object(w.a)({},a))})},tn=function(){var e=Object(l.g)();return Object(a.useEffect)((function(){e.push("/devices"),T.b.error("Device information not found")}),[]),Object(g.jsx)(g.Fragment,{})},nn=function(e){var t=e.device,n=e.onClosed,c=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useContext)(It).zespRequestAsync,i=Object(m.b)(),l="/Devices/".concat(e.zespInfo.IEEE);return{forceClose:c,onCancelHandler:function(){r(!0)},onSaveHandler:function(t,n){t=t||void 0,n=n||void 0,s({data:"LoadJson|".concat(l),responseValidator:U(l)}).then((function(e){if(e.dataParts.length<1)throw Error("Unexpected device settings from ZESP");return JSON.parse(e.dataParts[0])})).then((function(e){e.Name=t,e.Location=n;var a=JSON.stringify(e);return s({data:"SaveJson|".concat(l,"|").concat(a),responseValidator:U("ZD_RSP")})})).then((function(a){if(a.dataParts.length<2||"ok"!==a.dataParts[1].toLowerCase())throw Error("Cannot save device settings");e=Object(w.a)(Object(w.a)({},e),{zespInfo:Object(w.a)(Object(w.a)({},e.zespInfo),{Name:t,Location:n})}),i(ke(e)),r(!0),T.b.success("Settings updated")})).catch((function(e){T.b.error("Cannot read device settings from ZESP"),console.error(e),r(!0)}))}}}(t),r=c.forceClose,s=c.onCancelHandler,i=c.onSaveHandler,l=Object(a.useState)(t.zespInfo.Name||""),d=Object(o.a)(l,2),u=d[0],b=d[1],j=Object(a.useState)(t.zespInfo.Location||""),O=Object(o.a)(j,2),f=O[0],p=O[1],v=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(B.a,{type:"submit",children:"Save changes"}),Object(g.jsx)(B.a,{variant:"secondary",role:"cancel",onClick:s,children:"Cancel"})]});return Object(g.jsxs)(Ht,{title:"Device settings",onClosed:n,footer:v,forceClose:r,onSubmit:function(){return i(u,f)},children:[Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",children:[Object(g.jsx)(kt.a.Label,{column:!0,sm:"4",children:"Display name"}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,{value:u,onChange:function(e){return b(e.target.value)},placeholder:t.zespInfo.ModelId})})]}),Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",children:[Object(g.jsx)(kt.a.Label,{column:!0,sm:"4",children:"Location"}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,{value:f,onChange:function(e){return p(e.target.value)},placeholder:"Default"})})]})]})},an=function(){var e=function(){var e=Object(l.h)().ieee,t=Object(a.useState)(!0),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),d=i[0],u=i[1],b=Object(a.useState)(!1),j=Object(o.a)(b,2),O=j[0],f=j[1],p=Object(l.g)(),v=Object(a.useContext)(It).zespRequestAsync,E=Object(m.c)((function(t){return Me(t,e)}),Xt),h=E&&xt(E);if(!E)throw new Error("Device information not found");var g=function(){return p.push("/devices")};return{deviceInfo:E,groups:h,showDialog:c,showSettings:d,onExitHandler:function(){O&&setTimeout(g,100)},onDebugDeviceHandler:function(){console.log(E),T.b.success("Check console for debug info",{icon:"\ud83d\udc7d"})},onDeleteDeviceHandler:function(){g(),v({data:"removeDevice|".concat(E.zespInfo.Device,"|").concat(E.zespInfo.IEEE),responseValidator:U("alldev")}).then((function(){T.b.success("Device deleted",{icon:"\ud83d\ude35\u200d\ud83d\udcab"})})).catch((function(e){T.b.error("Cannot delete selected device",{duration:3e3}),r(!0)}))},onCloseClickHandler:function(){f(!0),r(!1)},onSettingsHandler:function(){r(!1),u(!0)},onSettingsClosedHandler:function(){u(!1),r(!0)},onReportsHandler:function(){p.push("/device/template/".concat(E.zespInfo.IEEE))}}}(),t=e.deviceInfo,n=e.groups,c=e.showDialog,r=e.showSettings,s=e.onDebugDeviceHandler,i=e.onDeleteDeviceHandler,u=e.onExitHandler,b=e.onCloseClickHandler,j=e.onSettingsHandler,O=e.onSettingsClosedHandler,f=e.onReportsHandler;if(!n||0===n.length)return console.warn("No controls found for '".concat(t.zespInfo.IEEE,"' device")),Object(g.jsx)(tn,{});var p=Object(a.useState)(n[0].name),v=Object(o.a)(p,2),E=v[0],h=v[1],I={onCloseClickHandler:b,onSettingsHandler:j,onSettingsClosedHandler:O,onDeleteDeviceHandler:i,onDebugDeviceHandler:s,onReportsHandler:f};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.a,{show:c,onHide:b,onExited:u,children:[Object(g.jsx)($t,Object(w.a)({groups:n,device:t,activeGroupName:E,setActiveGroupName:h},I)),Object(g.jsx)(en,{groups:n,device:t,activeGroupName:E})]}),r&&Object(g.jsx)(nn,{onClosed:O,device:t})]})},cn=n(6),rn={handleSubmit:function(e,t){e.preventDefault(),console.warn("Not implemented yet")}},sn=["onSubmit"],on=function(e){var t=e.onSubmit,n=Object(cn.a)(e,sn);return Object(g.jsx)(kt.a,Object(w.a)(Object(w.a)({onSubmit:function(e){return rn.handleSubmit(e,t)}},n),{},{children:e.children}))},ln=["getDeviceList","get_Mi_lamp","LoadJson|/location.json","LoadJson|/groups.json","LoadJson|/zesp_ui.json"],dn=["01 0000 01 0100","01 0000 01 0000"],un=function(){var e=Object(a.useContext)(It),t=e.zespSend,n=e.subscribe,c=e.unsubscribe,r=Object(a.useState)([]),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(a.useState)(""),u=Object(o.a)(d,2),m=u[0],b=u[1],j=Object(a.useState)(!1),O=Object(o.a)(j,2),f=O[0],p=O[1],v=Object(a.useState)(!0),E=Object(o.a)(v,2),h=E[0],I=E[1],N=Object(a.useRef)(i),T=Object(a.useRef)(f),R=Object(a.useRef)(h),A=function(e){if(!T.current&&(!R.current||!e.startsWith("rep|")&&!e.startsWith("ArBle|"))){var t=[e.substr(0,500)].concat(Object(S.a)(N.current)),n=t.length-15;n>0&&t.splice(t.length-n,n),N.current=t,l(t)}},C=function(e){var t=e.target.innerText;b(t)},y=function(e){t({data:e||m,isBinary:!0})};return Object(a.useEffect)((function(){var e=n(V,(function(e){var t=e.response;A(t)}));return function(){return c(e)}}),[]),Object(g.jsxs)(x,{children:[Object(g.jsx)(on,{onSubmit:function(e){e.messageToSend&&(A(">".concat(e.messageToSend)),t({data:e.messageToSend}))},children:Object(g.jsxs)(wt.a,{children:[Object(g.jsx)(wt.a.Header,{children:"WebSocket tester (FOR DEVELOPMENT ONLY)"}),Object(g.jsxs)(wt.a.Body,{children:[Object(g.jsxs)("div",{className:"row mb-2",children:[Object(g.jsx)("label",{className:"col-md-3 col-lg-2",children:"Message to send"}),Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("input",{type:"text",className:"form-control",id:"messageToSend",value:m,onChange:function(e){return b(e.target.value)}})})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-md-3 col-lg-2"}),Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:ln.map((function(e,t){return Object(g.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary me-1",onClick:C,children:e},t)}))}),Object(g.jsx)("div",{className:"mt-1",children:dn.map((function(e,t){return Object(g.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary me-1",onClick:function(){b(e),y(e)},children:e},t)}))})]})]})]}),Object(g.jsxs)(wt.a.Footer,{children:[Object(g.jsx)(B.a,{variant:"primary",type:"submit",children:"Send message"}),Object(g.jsx)(B.a,{variant:"secondary",type:"button",onClick:function(){return y()},className:"ms-2",children:"Send binary"})]})]})}),Object(g.jsxs)(wt.a,{className:"mt-4",children:[Object(g.jsxs)(wt.a.Header,{children:[Object(g.jsxs)("span",{children:["Communication log ",Object(g.jsx)("span",{className:"badge bg-secondary small",children:i.length})]}),Object(g.jsx)("button",{className:"btn btn-outline-secondary ms-3 btn-sm",onClick:function(){N.current=[],l([])},children:"Clear log"}),Object(g.jsx)("button",{className:"btn btn-outline-secondary ms-3 btn-sm",onClick:function(){return function(){var e=!T.current;T.current=e,p(e)}()},children:f?"Start logs":"Pause logs"}),Object(g.jsx)("button",{className:"btn btn-outline-".concat(h?"secondary":"info"," ms-3 btn-sm float-end"),onClick:function(){return function(){var e=!R.current;R.current=e,I(e)}()},children:h?"REPs disabled":"REPs enabled"})]}),Object(g.jsx)(wt.a.Body,{children:i.map((function(e,t){return e.startsWith(">")?Object(g.jsx)("div",{className:"px-2 mb-3 py-1 m-1 bg-success bg-opacity-25 rounded",children:e.substr(1)},t):Object(g.jsx)("div",{className:"border-start mb-3 border-3 border-warning p-0 d-flex flex-wrap",children:e.split("|").map((function(e,t){return Object(g.jsx)("span",{className:"bg-warning bg-opacity-25 m-1 px-2 rounded",children:e},t)}))},t)}))})]})]})},mn=function(e){var t=e.controlId,n=e.label,a=e.placeholder,c=e.defaultValue,r=e.type,s={placeholder:a,type:void 0===r?"text":r};return c&&(s=Object(w.a)(Object(w.a)({},s),{defaultValue:c.toString()})),Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",controlId:t,children:[Object(g.jsx)(kt.a.Label,{column:!0,md:"3",lg:"2",children:n}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,Object(w.a)({},s))})]})},bn=function(e){var t=e.controlId,n=e.label,a=e.defaultChecked,c=e.checkedValue,r=void 0===c?"true":c,s=e.uncheckedValue,o="true"===a||"1"===a||1===a||!0===a||!1,i={checked_value:r,unchecked_value:void 0===s?"false":s};return a&&(i=Object(w.a)(Object(w.a)({},i),{defaultChecked:o})),Object(g.jsx)(kt.a.Group,{controlId:t,className:"d-inline-block",children:Object(g.jsxs)(kt.a.Label,{className:"d-flex",children:[Object(g.jsx)(kt.a.Check,Object(w.a)({className:"pe-2"},i)),Object(g.jsx)("span",{children:n})]})})},jn=function(){var e,t=Object(m.b)(),n=Object(a.useContext)(It),c=$e(n),r=Object(m.c)(ct),s=Object(Gt.a)(["pages.setup-mqtt","common"]).t;if(!r)return Object(g.jsx)("div",{children:"No settings found..."});var o=r.MQTT;return Object(g.jsx)(x,{children:Object(g.jsx)(wt.a,{children:Object(g.jsxs)(on,{onSubmit:function(e){return Jt({MQTT:e},r,t,c.setAsync)},children:[Object(g.jsxs)(wt.a.Body,{children:[Object(g.jsx)(mn,{controlId:"mqttup",defaultValue:o.mqttup,label:s("topic.label"),placeholder:s("topic.placeholder")}),Object(g.jsx)(mn,{controlId:"mqtt",defaultValue:o.mqtt,label:s("server.label"),placeholder:s("server.placeholder")}),Object(g.jsx)(mn,{controlId:"mqttPort",defaultValue:null===(e=o.mqttPort)||void 0===e?void 0:e.toString(),label:s("port.label"),placeholder:s("port.placeholder")}),Object(g.jsx)(mn,{controlId:"mqttLogin",defaultValue:o.mqttLogin,label:s("login.label"),placeholder:s("login.placeholder")}),Object(g.jsx)(mn,{type:"password",controlId:"mqttPassw",defaultValue:o.mqttPassw,label:s("password.label"),placeholder:s("password.placeholder")}),Object(g.jsxs)(F.a,{children:[Object(g.jsx)(de.a,{md:"3",lg:"2"}),Object(g.jsxs)(de.a,{className:"space-between-4",children:[Object(g.jsx)(bn,{controlId:"mqttEnable",defaultChecked:o.mqttEnable,label:s("is_enabled.label"),checkedValue:1,uncheckedValue:0}),Object(g.jsx)(bn,{controlId:"Home_Assistant",defaultChecked:o.Home_Assistant,label:s("is_ha_enabled.label"),checkedValue:1,uncheckedValue:0})]})]})]}),Object(g.jsx)(wt.a.Footer,{children:Object(g.jsx)(B.a,{variant:"primary",type:"submit",children:s("common:save_button")})})]})})})},On=function(){return Object(g.jsx)(x,{children:Object(g.jsx)("div",{className:"px-4 py-5 bg-light rounded-3",children:Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)("h1",{className:"display-5 fw-bold",children:"Not implemented yet!"}),Object(g.jsxs)("p",{className:"col-md-8 fs-4",children:["Hello, my dear friend! Just imagine how awesome this feature can be and share it with developers ~_~ ",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"Or you can even implement it yourself, everything you need is just to jump to source codes, made some magic, test it and that's it!"]}),Object(g.jsx)("hr",{className:"my-4"}),Object(g.jsxs)("p",{children:["This feature is under contruction. You can find latest verion on ",Object(g.jsx)("a",{href:"#",children:"github project page"})," or just click this big blue button bellow."]}),Object(g.jsx)("a",{href:"#",target:"_blank",rel:"noreferrer",className:"btn btn-primary btn-lg",type:"button",children:"Learn more"})]})})})},fn=function(){var e=Object(m.b)(),t=Object(a.useContext)(It),n=$e(t),c=Object(m.c)(ct),r=Object(Gt.a)(["pages.setup-wifi","common"]).t;if(!c)return Object(g.jsx)(a.Fragment,{});var s=c.Wifi;return Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(x,{children:Object(g.jsx)(on,{onSubmit:function(t){return Jt({Wifi:t},c,e,n.setAsync)},children:Object(g.jsxs)(wt.a,{children:[Object(g.jsxs)(wt.a.Body,{children:[Object(g.jsx)(mn,{controlId:"ssid",defaultValue:null===s||void 0===s?void 0:s.ssid,label:r("ssid.label"),placeholder:r("ssid.placeholder")}),Object(g.jsx)(mn,{type:"password",controlId:"pass",defaultValue:null===s||void 0===s?void 0:s.pass,label:r("pass.label"),placeholder:r("pass.placeholder")}),Object(g.jsx)(mn,{controlId:"ip",defaultValue:null===s||void 0===s?void 0:s.ip,label:r("ip.label"),placeholder:r("ip.placeholder")}),Object(g.jsx)(mn,{controlId:"mask",defaultValue:null===s||void 0===s?void 0:s.mask,label:r("mask.label"),placeholder:r("mask.placeholder")}),Object(g.jsx)(mn,{controlId:"gw",defaultValue:null===s||void 0===s?void 0:s.gw,label:r("gw.label"),placeholder:r("gw.placeholder")})]}),Object(g.jsx)(wt.a.Footer,{children:Object(g.jsx)(B.a,{variant:"primary",type:"submit",children:r("common:save_button")})})]})})})})},pn=(n(369),function(e,t){return"ZESP_Root"===e.name?-1:"ZESP_Root"===t.name?1:e.name<t.name?-1:e.name>t.name?1:0}),vn=function(e){var t=e.title,n=e.children;return Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsx)("div",{className:"modal-header",children:Object(g.jsx)("h5",{className:"modal-title",children:t})}),Object(g.jsx)("div",{className:"modal-body",children:Object(g.jsxs)(F.a,{children:[Object(g.jsx)(de.a,{xs:3,className:"d-flex align-items-center justify-content-center",children:Object(g.jsx)("i",{className:"bi bi-exclamation-diamond text-danger",style:{fontSize:"60px"}})}),Object(g.jsx)(de.a,{className:"d-flex align-items-center",children:n})]})})]})})},En=function(e){var t=e.template,n=e.reportKey,a=e.showSettingsHandler,c=t.Report[n],r=St(n,t.DevType);if(c&&r){var s=Tt.find((function(e){return e.clusterId===r.clusterId}))||{name:"Unknown"},o=(c.role||"").split("&")[0],i=(null===s||void 0===s?void 0:s.attributes)&&0!==Object.keys(s.attributes).length?o?s.attributes["".concat(r.attributeId,":").concat(o)]||s.attributes[r.attributeId]||void 0:s.attributes[r.attributeId]||void 0:void 0;return{report:c,keyInfo:r,clusterInfo:s,attributeInfo:i,editHandler:function(){return a({keyInfo:r,reportInfo:c})}}}},hn=function(e){var t=En(e);if(!t)return console.warn("Unknown report with key ".concat(e.reportKey)),Object(g.jsx)(a.Fragment,{});var n=t.report,c=t.keyInfo,r=t.clusterInfo,s=t.attributeInfo,i=t.editHandler,l=e.playHandler,d=e.onMoveReport,u=Object(a.useState)(!1),m=Object(o.a)(u,2),b=m[0],j=m[1],O=Object(g.jsxs)(qt.a,{id:"popover-basic",children:[Object(g.jsx)(qt.a.Header,{as:"h3",className:"bg-danger text-light",children:"Achtung! Are you sure?"}),Object(g.jsxs)(qt.a.Body,{children:["Please, click one more time in menu ",Object(g.jsx)("span",{className:"text-danger",children:"Delete report"})," to confirm."]})]});return Object(g.jsxs)("div",{className:"report",children:[Object(g.jsx)("div",{className:"report-menu",children:Object(g.jsxs)(Vt.a,{className:"d-inline-block",children:[Object(g.jsx)(Vt.a.Toggle,{variant:"link",children:Object(g.jsx)("i",{className:"bi bi-three-dots-vertical",style:{fontSize:"25px"}})}),Object(g.jsxs)(Vt.a.Menu,{children:[Object(g.jsx)(Vt.a.Item,{onClick:i,children:"Edit settings"}),Object(g.jsx)(Qt.a,{trigger:"click",overlay:O,rootClose:!0,onToggle:j,children:Object(g.jsx)("button",{className:"dropdown-item",onClick:function(){b&&e.deleteHandler(c)},children:"Delete report"})}),Object(g.jsx)(Vt.a.Divider,{}),Object(g.jsx)(Vt.a.Item,{onClick:function(){return d(c,-1)},children:"Move up"}),Object(g.jsx)(Vt.a.Item,{onClick:function(){return d(c,1)},children:"Move down"})]})]})}),Object(g.jsxs)("div",{className:"report-key",children:[Object(g.jsx)("div",{className:"title",title:r.name,children:r.name}),Object(g.jsx)("div",{className:"code",children:c.clusterId})]}),Object(g.jsxs)("div",{className:"report-key",children:[Object(g.jsx)("div",{className:"title",title:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.id),children:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.id)||"Unknown"}),Object(g.jsx)("div",{className:"code",children:c.attributeId||"-"})]}),Object(g.jsx)("div",{className:"report-label",children:n.label}),Object(g.jsx)("div",{className:"report-action",children:Object(g.jsx)("i",{className:"bi bi-play-fill",style:{fontSize:"45px"},onClick:function(){return l(c)}})})]})},gn=function(e){var t,n,c,r=e.data,s=e.onClosed,i=e.onSave,l=Object(a.useState)((null===(t=r.reportInfo)||void 0===t?void 0:t.label)||""),d=Object(o.a)(l,2),u=d[0],m=d[1],b=Object(a.useState)((null===(n=r.reportInfo)||void 0===n?void 0:n.role)||""),j=Object(o.a)(b,2),O=j[0],f=j[1],p=Object(a.useState)((null===(c=r.reportInfo)||void 0===c?void 0:c.mat)||""),v=Object(o.a)(p,2),E=v[0],h=v[1],I=Object(a.useState)(!1),N=Object(o.a)(I,2),T=N[0],x=N[1],S=["binary_sensor","fan","alarm_control_panel","lock","climate","light_XY","light_rgb","light_hue","light_temp","light_level","light_onoff","light","livolo_swith1ch","outlet","switch","cover","sensor"].sort(),R=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(B.a,{type:"submit",children:"Save"}),Object(g.jsx)(B.a,{variant:"secondary",onClick:function(){return x(!0)},children:"Cancel"})]});return Object(g.jsxs)(Ht,{title:"Report settings for '".concat(r.keyInfo.endpoint," ").concat(r.keyInfo.clusterId," ").concat(r.keyInfo.attributeId,"'"),onClosed:s,footer:R,forceClose:T,onSubmit:function(){var e=Object(w.a)(Object(w.a)({},r.reportInfo||{}),{label:u,role:O,mat:E});i(r.keyInfo,e),x(!0)},children:[Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",children:[Object(g.jsx)(kt.a.Label,{column:!0,sm:"4",children:"Label"}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,{value:u||"",onChange:function(e){return m(e.target.value)},placeholder:"Label is required",isInvalid:!u})})]}),Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",children:[Object(g.jsx)(kt.a.Label,{column:!0,sm:"4",children:"Role"}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,{value:O||"",onChange:function(e){return f(e.target.value)},placeholder:"Default",list:"roles-list"})})]}),Object(g.jsxs)(kt.a.Group,{as:F.a,className:"mb-3",children:[Object(g.jsx)(kt.a.Label,{column:!0,sm:"4",children:"Mat (???)"}),Object(g.jsx)(de.a,{children:Object(g.jsx)(kt.a.Control,{value:E||"",onChange:function(e){return h(e.target.value)},placeholder:"Default"})})]}),Object(g.jsx)("datalist",{id:"roles-list",children:S.map((function(e,t){return Object(g.jsx)("option",{value:e},t)}))})]})},In=(n(370),n(197)),Nn=n(394),Tn=n(100),xn=n(193),Sn=n(48),Rn=function(e){var t=e.play,n=e.template,c=e.onAddReport,r=Object(a.useState)((null===t||void 0===t?void 0:t.clusterId)||""),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(a.useState)((null===t||void 0===t?void 0:t.attributeId)||""),u=Object(o.a)(d,2),m=u[0],b=u[1],j=Object(a.useState)(),O=Object(o.a)(j,2),f=O[0],p=O[1],v=Object(a.useState)(),E=Object(o.a)(v,2),h=E[0],I=E[1],N=Object(a.useState)(!1),x=Object(o.a)(N,2),S=x[0],R=x[1],A=Object(a.useState)(!1),C=Object(o.a)(A,2),y=C[0],L=C[1],M=Object(a.useState)(),P=Object(o.a)(M,2),w=P[0],D=P[1],U=Object(a.useState)(!1),V=Object(o.a)(U,2),k=V[0],H=V[1],G=Object(a.useContext)(It).zespRequestAsync,W=Object(a.useRef)([]),Y=n.EP&&Object.entries(n.EP)[0]&&Object.entries(n.EP)[0][1],Z=Tt.map((function(e){return e})).filter((function(e){return e.attributes&&Object.keys(e.attributes).length>0})).filter((function(e){return S||(null===Y||void 0===Y?void 0:Y.ClO.indexOf(e.clusterId))>=0||(null===Y||void 0===Y?void 0:Y.ClI.indexOf(e.clusterId))>=0})),J=In;Object(a.useEffect)((function(){n&&(l(""),b(""),p(void 0),D(void 0),I(void 0))}),[n]),Object(a.useEffect)((function(){t&&(l(t.clusterId),b(t.attributeId))}),[t]),Object(a.useEffect)((function(){var e;i&&p(null===(e=Z.find((function(e){return e.clusterId===i})))||void 0===e?void 0:e.attributes)}),[i]),Object(a.useEffect)((function(){W.current.forEach((function(e){return clearTimeout(e)})),W.current.push(setTimeout((function(){return K()}),500))}),[i,m]);var K=function(){var e=document.getElementsByClassName("list-group"),t=0;W.current.forEach((function(e){return clearTimeout(e)}));for(var n=function(n){var a=e[n];if(!a)return"continue";var c=a.getElementsByClassName("btn active");if(0==c.length)return"continue";var r=setTimeout((function(){var e;return null===(e=c[0])||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"nearest"})}),t);W.current.push(r),t+=500},a=0;a<e.length;a++)n(a)},X=function(e,t,n,a){D({type:"info",message:"Reading..."}),L(!0),G({data:"reqAtribute|".concat(e,"|").concat(t,"|").concat(n,"|").concat(a,"|0000"),responseValidator:_(e,t,n,a)}).then((function(e){var t=JSON.parse(e.dataParts[0]),n={type:J[t.Dtype]||t.Dtype,data:t.Data,parsed:t.parsed};D(void 0),I(n)})).catch((function(e){D({type:"error",message:e})})).finally((function(){L(!1)}))};return Object(g.jsxs)("div",{className:"template-editor",children:[Object(g.jsxs)("div",{className:"input-group mb-2",children:[Object(g.jsx)("input",{type:"text",className:"form-control text-center flex-grow-0",style:{width:"95px"},defaultValue:"01",readOnly:!0}),Object(g.jsx)("input",{type:"text",className:"form-control text-center",placeholder:"Cluster",value:i,onChange:function(e){return l(e.target.value)}}),Object(g.jsx)("input",{type:"text",className:"form-control text-center",placeholder:"Attribute",value:m,onChange:function(e){return b(e.target.value)}}),Object(g.jsxs)("button",{className:"btn btn-outline-primary flex-grow-0",style:{width:"100px"},type:"button",onClick:function(){i||0!==i.trim().length?H(!0):T.b.error("Cluster value required",{icon:"\ud83d\udc7e"})},disabled:y,children:[Object(g.jsx)("i",{className:"bi bi-plus"})," Add"]}),Object(g.jsxs)("button",{className:"btn btn-outline-primary flex-grow-0",style:{width:"100px"},type:"button",onClick:function(){D(void 0),I(void 0),i||0!==i.trim().length?m||0!==m.trim().length?X(n.Device,"01",i,m):T.b.error("Attribute value required",{icon:"\u2622\ufe0f"}):T.b.error("Cluster value required",{icon:"\ud83d\udc7e"})},disabled:y,children:[Object(g.jsx)("i",{className:"bi bi-cloud-arrow-down-fill me-2"})," Read"]})]}),w&&Object(g.jsx)("div",{className:"alert ".concat("error"===w.type?"alert-warning":"alert-info"),children:w.message}),h&&Object(g.jsxs)("div",{className:"results alert alert-success",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Data type:"})," ",h.type]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Response:"})," ",h.data||"undefined"]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Parsed:"})," ",h.parsed||"undefined"]})]}),Z&&Z.length>0&&Object(g.jsxs)(F.a,{children:[Object(g.jsx)(de.a,{xs:6,className:"lists",children:Object(g.jsx)(Nn.a,{as:z.a,vertical:!0,children:Z.map((function(e,t){var n,a=(n=e.clusterId,(null===Y||void 0===Y?void 0:Y.ClO)&&-1!==Y.ClO.indexOf(n)&&(null===Y||void 0===Y?void 0:Y.ClI)&&-1!==Y.ClI.indexOf(n)?"in/out":(null===Y||void 0===Y?void 0:Y.ClO)&&-1!==Y.ClO.indexOf(n)?"out":(null===Y||void 0===Y?void 0:Y.ClI)&&-1!==Y.ClI.indexOf(n)?"in":void 0);return Object(g.jsxs)(Nn.a.Item,{as:B.a,onClick:function(){return l(e.clusterId)},active:e.clusterId===i,className:"d-flex justify-content-between align-items-center",children:[Object(g.jsx)("div",{className:"me-auto item-title",title:e.name,children:e.name}),Object(g.jsxs)("div",{className:"badges",children:[a&&Object(g.jsx)("span",{className:"badge bg-info rounded-pill",children:a}),Object(g.jsx)("span",{className:"badge bg-secondary rounded-pill",children:e.clusterId})]})]},t)}))})}),Object(g.jsx)(de.a,{xs:6,className:"lists",children:f&&Object(g.jsx)(Nn.a,{as:z.a,vertical:!0,children:Object.entries(f).map((function(e,t){var n=Object(o.a)(e,2),a=n[0],c=n[1],r=a.split(":");return Object(g.jsxs)(Nn.a.Item,{as:B.a,onClick:function(){return b(r[0])},active:r[0]===m,className:"d-flex justify-content-between align-items-center",children:[Object(g.jsx)("div",{className:"me-auto item-title",title:c.name,children:c.name||"Unnamed"}),Object(g.jsxs)("div",{className:"badges",children:[r.length>1&&Object(g.jsx)("span",{className:"badge bg-info rounded-pill",children:r[1]}),Object(g.jsx)("span",{className:"badge bg-secondary rounded-pill",children:r[0]})]})]},t)}))})})]}),(!Z||0===Z.length)&&Object(g.jsx)("div",{className:"alert alert-warning text-center",children:"No device related clusters found"}),k&&Object(g.jsx)(gn,{data:{reportInfo:void 0,keyInfo:{endpoint:"01",clusterId:i,attributeId:m}},onClosed:function(){return H(!1)},onSave:c}),Object(g.jsx)(Tn.a,{className:"text-end border-top mt-1 pt-2 d-flex align-items-center justify-content-end",children:Object(g.jsxs)(xn.a,{className:"m-0",children:["Show all clusters and attributes",Object(g.jsx)(Sn.a,{className:"ms-2",checked:S,onChange:function(){return R(!S)}})]})})]})},An=function(){var e=function(){var e=Object(m.b)(),t=Object(l.h)().ieee,n=Object(a.useContext)(It).zespRequestAsync,c="/Devices/".concat(t),r=Object(a.useState)(),s=Object(o.a)(r,2),i=s[0],d=s[1],u=Object(a.useState)("loading"),b=Object(o.a)(u,2),j=b[0],O=b[1],f=Object(a.useState)(),p=Object(o.a)(f,2),h=p[0],g=p[1],I=Object(a.useState)(),N=Object(o.a)(I,2),x=N[0],S=N[1],R=Object(m.c)(Pe).filter((function(e){return"0000"!==e.zespInfo.Device})).map((function(e){return{name:e.zespInfo.Name||e.zespInfo.ModelId,ieee:e.zespInfo.IEEE}})).sort(pn);Object(a.useEffect)((function(){n({data:"LoadJson|".concat(c),responseValidator:U(c)}).then((function(e){if(e.dataParts.length<1)throw Error("Unexpected device settings from ZESP");var t=JSON.parse(e.dataParts[0]);d(t),O("loaded")})).catch((function(){O("error")}))}),[t]);var A=function(a,r){var s=a.attributeId?"".concat(a.endpoint).concat(a.clusterId).concat(a.attributeId):a.clusterId,o=Object(w.a)(Object(w.a)({},i.Report),Object(ye.a)({},s,r)),l=Object(w.a)(Object(w.a)({},i),{Report:o}),u=JSON.stringify(l);n({data:"SaveJson|".concat(c,"|").concat(u),responseValidator:U("ZD_RSP")}).then((function(n){if(n.dataParts.length<2||"ok"!==n.dataParts[1].toLowerCase())throw Error("Cannot save device settings");e(Ue({ieee:t,reportKey:s,update:r})),d(l),T.b.success("Report settings updated")}))};return{template:i,devices:R,status:j,ieee:t,showSettings:x,play:h,setShowSettings:S,onSaveReportSettings:A,playHandler:function(e){return g(e)},onAddReport:function(e,t){A(e,t)},onDelete:function(t){var a="".concat(t.endpoint).concat(t.clusterId).concat(t.attributeId),r=JSON.parse(JSON.stringify(i));r.Report&&delete r.Report[a];var s=JSON.stringify(r);e(E({show:!0,message:"Removing..."})),n({data:"SaveJson|".concat(c,"|").concat(s),responseValidator:U("ZD_RSP")}).then((function(t){if(t.dataParts.length<2||"ok"!==t.dataParts[1].toLowerCase())throw Error("Cannot save device settings");e(He(r)),d(r),T.b.success("Report deleted",{icon:"\ud83d\uddd1"})})).catch((function(e){return T.b.error(e)})).finally((function(){e(v(!1))}))},moveReport:function(t,a){if(!i)throw Error("Unexpected empty template");var r="".concat(t.endpoint).concat(t.clusterId).concat(t.attributeId),s=Object.keys(i.Report),o=s.indexOf(r);if(-1!=o){var l=o+a;if(l<0||l>=s.length)console.debug("Didn't moved, cause limited");else{var u=s[l];s[l]=s[o],s[o]=u,console.log("old: ".concat(o,"; new: ").concat(l)),console.log(s);var m=s.reduce((function(e,t){return Object(w.a)(Object(w.a)({},e),{},Object(ye.a)({},t,i.Report[t]))}),{}),b=JSON.stringify(Object(w.a)(Object(w.a)({},i),{Report:m}));e(E({show:!0,message:"Reordering..."})),n({data:"SaveJson|".concat(c,"|").concat(b),responseValidator:U("ZD_RSP")}).then((function(t){if(t.dataParts.length<2||"ok"!==t.dataParts[1].toLowerCase())throw Error("Cannot save device settings");i.Report=m,d(i),e(Fe({ieee:i.IEEE,orderedReportKeys:s}))})).catch((function(e){return T.b.error(e)})).finally((function(){e(v(!1))}))}}else console.warn("Cannot find report current index...")}}}(),t=e.template,n=e.devices,c=e.status,r=e.ieee,s=e.showSettings,d=e.play,u=e.setShowSettings,b=e.onSaveReportSettings,j=e.playHandler,O=e.onAddReport,f=e.onDelete,p=e.moveReport,h=Object(l.g)();return"loading"===c?Object(g.jsx)(I,{message:"Template loading..."}):"error"!==c&&t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x,{children:Object(g.jsx)("div",{children:Object(g.jsxs)(wt.a,{className:"device-template",children:[Object(g.jsxs)(wt.a.Header,{className:"breadcrumb",children:[Object(g.jsx)(i.b,{to:"/devices",className:"breadcrumb-item",children:"Devices"}),Object(g.jsx)(i.b,{to:"/devices/".concat(r),className:"breadcrumb-item",children:"Settings"}),Object(g.jsxs)(Vt.a,{className:"d-inline-block",children:[Object(g.jsx)(Vt.a.Toggle,{variant:"link",as:"span",className:"breadcrumb-item",children:t.Name||t.ModelId}),Object(g.jsx)(Vt.a.Menu,{children:n.map((function(e,t){return Object(g.jsx)(Vt.a.Item,{onClick:function(){return function(e){h.push("/device/template/".concat(e.ieee)),j(void 0)}(e)},className:e.ieee===r?"text-primary":"",children:e.name},t)}))})]})]}),Object(g.jsxs)(wt.a.Body,{className:"row",children:[Object(g.jsx)(de.a,{xs:12,lg:6,children:Object.keys(t.Report).map((function(e){return Object(g.jsx)(hn,{reportKey:e,template:t,showSettingsHandler:u,playHandler:j,deleteHandler:f,onMoveReport:p},e)}))}),Object(g.jsx)(de.a,{xs:12,lg:6,children:Object(g.jsx)(Rn,{play:d,template:t,onAddReport:O})})]})]})})}),s&&Object(g.jsx)(gn,{onClosed:function(){return u(void 0)},data:s,onSave:b})]}):Object(g.jsx)(vn,{title:"Loading error",children:"Oops, for some reasons we cannot read template data for selected device."})},Cn=function(){var e=Object(m.c)(C),t=Object(m.b)();return e?(setTimeout((function(){return t(v(!1))}),300),Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(l.b,{exact:!0,path:"/",children:Object(g.jsx)(l.a,{to:"/devices"})}),Object(g.jsx)(l.b,{path:"/devices",component:Wt}),Object(g.jsx)(l.b,{path:"/devices/:ieee",component:an}),Object(g.jsx)(l.b,{path:"/device/template/:ieee",component:An}),Object(g.jsx)(l.b,{path:"/setup",component:Kt}),Object(g.jsx)(l.b,{exact:!0,path:"/setup",component:fn}),Object(g.jsx)(l.b,{path:"/setup/mqtt",component:jn}),Object(g.jsx)(l.b,{path:"/setup/zigbee",component:On}),Object(g.jsx)(l.b,{path:"/setup/telegram",component:On}),Object(g.jsx)(l.b,{path:"/setup/z2m",component:On}),Object(g.jsx)(l.b,{path:"/setup/zesp-ui",component:On}),Object(g.jsx)(l.b,{path:"/setup/firmware",component:On}),Object(g.jsx)(l.b,{path:"/socket-test",component:un})]})):(setTimeout((function(){return t(v(!0))}),0),Object(g.jsx)(a.Fragment,{}))},yn=(n(140),n(386),n(371),function(){var e=Object(m.c)(Ye);return Object(g.jsx)("footer",{className:"app-footer my-3",children:Object(g.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(g.jsx)("div",{children:Object(g.jsxs)("a",{href:"https://github.com/NickRimmer/zesp-ui",target:"_blank",rel:"noreferrer",children:["ZESP UI",Object(g.jsx)("i",{className:"bi bi-github ms-2"})]})}),Object(g.jsx)("div",{className:"mx-3 border-start opacity-25"}),Object(g.jsxs)("div",{children:["UI ",Object(g.jsx)("span",{className:"highlight",children:"0.0.2 alfa"})]}),Object(g.jsx)("div",{className:"mx-3 border-start opacity-25"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("a",{href:"https://t.me/zesp32",target:"_blank",rel:"noreferrer",children:"ZESP"})," ",Object(g.jsx)("span",{className:"highlight",children:e})]})]})})}),Ln=(n(372),n(373),function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(It).zespSend,s=Object(m.b)(),i=Object(g.jsx)("span",{className:"nav-link clickable",onClick:function(){return c(!0)},children:Object(g.jsx)("i",{className:"bi bi-power"})}),l=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(B.a,{onClick:function(){s(E({show:!0,message:"Restarting, please wait..."})),c(!1),r({data:"RebootESP"})},children:"Restart ZESP"}),Object(g.jsx)(B.a,{onClick:function(){s(E({show:!0,message:"Shutting down..."})),c(!1),setTimeout((function(){return document.location.href="/"}),2e3),r({data:"Shutdown"})},variant:"secondary",children:"Shutdown"})]});return Object(g.jsxs)(g.Fragment,{children:[i,n&&Object(g.jsxs)(Ht,{title:"Power management",footer:l,onClosed:function(){return c(!1)},children:[Object(g.jsx)("div",{className:"mb-3",children:"Restart of ZESP service can take a few minutes. This page will be reloaded automatically when restart completed."}),Object(g.jsx)("div",{children:"To shutdown, just click Shutdown button. But this is way with one direction, make sure you know what are you doing."})]})]})}),Mn=function(){var e=Object(Gt.a)("nav").t;return Object(g.jsxs)("nav",{className:"nav nav-masthead justify-content-center pe-2",children:[Object(g.jsx)(i.b,{className:"nav-link",to:"/devices",children:e("devices")}),!1,Object(g.jsx)(i.b,{className:"nav-link",to:"/setup",children:e("setup")}),Object(g.jsx)("div",{className:"border-start mx-3 opacity-25"}),Object(g.jsx)(Ln,{})]})},Pn=function(e){var t=e.onClosed,n=e.zespFirmwareUpdate,c=e.zespFirmwareCurrentVersion,r=Object(a.useState)(!0),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(m.b)(),b=Object(a.useContext)(It),j=$e(b),O=Object(m.c)(rt),f=n.ver||"unknown",p=function(){return l(!1)},v=Object(w.a)(Object(w.a)(Object(w.a)({},{"Current version":c}),{"New version":f}),Object(w.a)(Object(w.a)({},n),{ver:void 0}));return Object(g.jsxs)(d.a,{show:i,onExited:t,onHide:p,children:[Object(g.jsxs)(d.a.Header,{children:[Object(g.jsx)("div",{children:"New version of ZESP Firmware"}),Object(g.jsx)("div",{className:"text-end modal-right-buttons",children:Object(g.jsx)("button",{type:"button",className:"btn-close me-1","aria-label":"Close",onClick:p})})]}),Object(g.jsx)(d.a.Body,{className:"text-start",children:Object(g.jsx)("div",{className:"rows-striped",children:Object.keys(v).map((function(e,t){return v[e]&&v[e].trim().length>0&&Object(g.jsxs)(F.a,{children:[Object(g.jsx)(de.a,{xs:4,className:"py-2 text-capitalize text-muted text-end",children:e}),Object(g.jsx)(de.a,{className:"py-2 text-dark",children:v[e]})]},t)}))})}),Object(g.jsxs)(d.a.Footer,{children:[Object(g.jsx)("button",{className:"btn btn-primary",onClick:function(){T.b.success("Not implemented yet...",{icon:Object(g.jsx)("i",{className:"bi bi-cone-striped text-warning"})})},children:"Download and Update"}),Object(g.jsx)("button",{className:"btn btn-secondary",onClick:function(){var e=Object(w.a)(Object(w.a)({},O||{}),{firmwareSkipUpdate:f});u(it(e)),j.setUiSettings(e),T.b.success("Notification for this version disabled",{icon:Object(g.jsx)("i",{className:"bi bi-bell-slash-fill text-success"})})},children:"Skip this version"})]})]})},wn=function(){var e=Object(m.c)(We),t=Object(m.c)(Ye),n=Object(m.c)(rt),c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1];if(!e||e.ver===t||(null===n||void 0===n?void 0:n.firmwareSkipUpdate)===e.ver)return Object(g.jsx)(a.Fragment,{});var l="".concat(t," to ").concat(e.ver," update");return Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{onClick:function(){i(!0)},className:"badge bg-info ms-3 notification-updates clickable",title:l,children:Object(g.jsx)("i",{className:"bi bi-cloud-arrow-down-fill"})}),s&&Object(g.jsx)(Pn,{onClosed:function(){return i(!1)},zespFirmwareUpdate:e,zespFirmwareCurrentVersion:t})]})},Dn=function(){return Object(g.jsxs)("header",{className:"app-header",children:[Object(g.jsx)("a",{href:"/",children:Object(g.jsx)("h3",{className:"title",children:"ZESP:UI"})}),Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(g.jsx)(Mn,{}),Object(g.jsx)(wn,{})]})]})},Un=function(){var e={address:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SELF_HOSTED:"1",REACT_APP_VERSION:"0.0.2 alfa"}).REACT_APP_SELF_HOSTED_DEV||document.location.hostname,name:"Self-hosted"};return console.log(e),Object(g.jsx)(_n,{server:e})},_n=function(e){return Object(g.jsx)(Nt,{server:e.server,children:Object(g.jsxs)("div",{className:"container-md d-flex w-100 h-100 p-3 mx-auto flex-column",children:[Object(g.jsx)(Dn,{}),Object(g.jsx)("main",{role:"main",className:"text-start d-flex flex-grow-1 flex-column",children:Object(g.jsx)(Cn,{})}),Object(g.jsx)(yn,{})]})})},Vn=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(i.a,{children:Object(g.jsx)(l.d,{children:Object(g.jsx)(Un,{})})}),Object(g.jsx)(N,{}),Object(g.jsx)(T.a,{})]})},kn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,395)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},Hn=Object(b.a)({reducer:{zesp:P,devices:ze,spinner:h,settings:lt,zespFirmware:Xe}});s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(m.a,{store:Hn,children:Object(g.jsx)(Vn,{})})}),document.getElementById("root")),kn()},45:function(e){e.exports=JSON.parse('[{"clusterId":"0000","name":"Basic","attributes":{"0000":{"name":"ZCLVERSION"},"0001":{"name":"APPLICATIONVERSION"},"0002":{"name":"STACKVERSION"},"0003":{"name":"HWVERSION"},"0004":{"name":"MANUFACTURERNAME"},"0005":{"name":"MODELIDENTIFIER"},"0006":{"name":"ATTR_DATECODE"},"0007":{"name":"POWERSOURCE"},"0008":{"name":"GENERICDEVICECLASS"},"0009":{"name":"GENERICDEVICETYPE"},"000A":{"name":"PRODUCTCODE"},"000B":{"name":"PRODUCTURL"},"0010":{"name":"LOCATIONDESCRIPTION"},"0011":{"name":"PHYSICALENVIRONMENT"},"0012":{"name":"DEVICEENABLED"},"0013":{"name":"ALARMMASK"},"0014":{"name":"DISABLELOCALCONFIG"}}},{"clusterId":"0001","name":"Power_cfg","attributes":{"0000":{"name":"MAINSVOLTAGE"},"0001":{"name":"MAINSFREQUENCY"},"0010":{"name":"MAINSALARMMASK"},"0011":{"name":"MAINSVOLTAGEMINTHRESHOLD"},"0012":{"name":"MAINSVOLTAGEMAXTHRESHOLD"},"0013":{"name":"MAINSVOLTAGEDWELLTRIPPOINT"},"0020":{"name":"BATTERYVOLTAGE"},"0021":{"name":"BATTERYPERCENTAGEREMAINING"},"0030":{"name":"BATTERYMANUFACTURER"},"0031":{"name":"BATTERYSIZE"},"0032":{"name":"BATTERYAHRRATING"},"0033":{"name":"BATTERYQUANTITY"},"0034":{"name":"BATTERYRATEDVOLTAGE"},"0035":{"name":"BATTERYALARMMASK"},"0036":{"name":"BATTERYVOLTAGEMINTHRESHOLD"},"0037":{"name":"BATTERYVOLTAGETHRESHOLD1"},"0038":{"name":"BATTERYVOLTAGETHRESHOLD2"},"0039":{"name":"BATTERYVOLTAGETHRESHOLD3"},"003A":{"name":"BATTERYPERCENTAGEMINTHRESHOLD"},"003B":{"name":"BATTERYPERCENTAGETHRESHOLD1"},"003C":{"name":"BATTERYPERCENTAGETHRESHOLD2"},"003D":{"name":"BATTERYPERCENTAGETHRESHOLD3"},"003E":{"name":"BATTERYALARMSTATE"}}},{"clusterId":"0002","name":"Device_Temperature_cfg","attributes":{}},{"clusterId":"0003","name":"Identify","attributes":{"0000":{"name":"IDENTIFYTIME"}}},{"clusterId":"0004","name":"Groups","attributes":{"0000":{"name":"NAMESUPPORT"}}},{"clusterId":"0005","name":"Scenes","attributes":{"0000":{"name":"SCENECOUNT"},"0001":{"name":"CURRENTSCENE"},"0002":{"name":"CURRENTGROUP"},"0003":{"name":"SCENEVALID"},"0004":{"name":"NAMESUPPORT"},"0005":{"name":"LASTCONFIGUREDBY"}}},{"clusterId":"0006","name":"On_Off","attributes":{"4000":{"name":"GLOBALSCENECONTROL"},"4001":{"name":"ONTIME"},"4002":{"name":"OFFWAITTIME"},"4003":{"name":"STARTUPONOFF"},"0000":{"name":"ONOFF"},"0000:light":{"id":"on_off_toggle","name":"On/Off/Toggle","arguments":{"commandOn":"01 {device} 01 01","commandOff":"01 {device} 01 00","commandToggle":"01 {device} 01 02"}}}},{"clusterId":"0007","name":"On_Off_Switch_cfg","attributes":{"0000":{"name":"SWITCHTYPE"},"0010":{"name":"SWITCHACTIONS"}}},{"clusterId":"0008","name":"Level_Control","attributes":{"4000":{"name":"STARTUPCURRENTLEVEL"},"0000":{"name":"CURRENTLEVEL"},"0000:light":{"id":"level_control","name":"Light level","arguments":{"command":"MoveToLevel|{device}|1|01|1|{value}|0001|0","min":0,"max":255}},"0001":{"name":"REMAININGTIME"},"0002":{"name":"MINIMUMLEVEL"},"0003":{"name":"MAXIMUMLEVEL"},"0004":{"name":"CURRENTFREQUENCY"},"0005":{"name":"MINIMUMFREQUENCY"},"0006":{"name":"MAXIMUMFREQUENCY"},"000F":{"name":"OPTIONS"},"0010":{"name":"ONOFFTRANSITIONTIME"},"0011":{"name":"ONLEVEL"},"0012":{"name":"ONTRANSITIONTIME"},"0013":{"name":"OFFTRANSITIONTIME"},"0014":{"name":"DEFAULTMOVERATE"}}},{"clusterId":"0009","name":"Alarms","attributes":{"0000":{"name":"ALARMCOUNT"}}},{"clusterId":"000A","name":"Time","attributes":{"0000":{"name":"TIME"},"0001":{"name":"TIMESTATUS"},"0002":{"name":"TIMEZONE"},"0003":{"name":"DSTSTART"},"0004":{"name":"DSTEND"},"0005":{"name":"DSTSHIFT"},"0006":{"name":"STANDARDTIME"},"0007":{"name":"LOCALTIME"},"0008":{"name":"LASTSETTIME"},"0009":{"name":"VALIDUNTILTIME"}}},{"clusterId":"000F","name":"Binary_Input","attributes":{"0004":{"name":"ACTIVETEXT"},"001C":{"name":"DESCRIPTION"},"002E":{"name":"INACTIVETEXT"},"0051":{"name":"OUTOFSERVICE"},"0054":{"name":"POLARITY"},"0055":{"name":"PRESENTVALUE"},"0067":{"name":"RELIABILITY"},"006F":{"name":"STATUSFLAGS"},"0100":{"name":"APPLICATIONTYPE"}}},{"clusterId":"0012","name":"Multistate","attributes":{"000E":{"name":"StateText"},"001C":{"name":"Description"},"004A":{"name":"NumberOfStates"},"0051":{"name":"OutOfService"},"0055":{"name":"PresentValue"},"0067":{"name":"Reliability"},"006F":{"name":"StatusFlags"},"0100":{"name":"ApplicationType"}}},{"clusterId":"0016","name":"Partition","attributes":{}},{"clusterId":"001A","name":"Power_Profile","attributes":{}},{"clusterId":"001B","name":"En50523_Appliance_Control","attributes":{}},{"clusterId":"0020","name":"Poll_Control","attributes":{}},{"clusterId":"0021","name":"Green_Power","attributes":{}},{"clusterId":"0100","name":"Shade_cfg","attributes":{}},{"clusterId":"0101","name":"Door_Lock","attributes":{}},{"clusterId":"0102","name":"Window_Covering","attributes":{"0000":{"name":"WINDOWCOVERINGTYPE"},"0001":{"name":"PHYSICALCLOSEDLIMITLIFT"},"0002":{"name":"PHYSICALCLOSEDLIMITTILT"},"0003":{"name":"CURRENTPOSITIONLIFT"},"0004":{"name":"CURRENTPOSITIONTILT"},"0005":{"name":"NUMBEROFACTUATIONSLIFT"},"0006":{"name":"NUMBEROFACTUATIONSTILT"},"0007":{"name":"CONFIGSTATUS"},"0008":{"name":"CURRENTPOSITIONLIFTPERCENTAGE"},"0009":{"name":"CURRENTPOSITIONTILTPERCENTAGE"},"0010":{"name":"INSTALLEDOPENLIMITLIFT"},"0011":{"name":"INSTALLEDCLOSEDLIMITLIFT"},"0012":{"name":"INSTALLEDOPENLIMITTILT"},"0013":{"name":"INSTALLEDCLOSEDLIMITTILT"},"0014":{"name":"VELOCITYLIFT"},"0015":{"name":"ACCELERATIONTIMELIFT"},"0016":{"name":"DECELERATIONTIMELIFT"},"0017":{"name":"MODE"},"0018":{"name":"INTERMEDIATESETPOINTSLIFT"},"0019":{"name":"INTERMEDIATESETPOINTSTILT"}}},{"clusterId":"0200","name":"Pump_cfg_And_Control","attributes":{}},{"clusterId":"0201","name":"Thermostat","attributes":{"0000":{"name":"LOCALTEMPERATURE"},"0001":{"name":"OUTDOORTEMPERATURE"},"0002":{"name":"OCCUPANCY"},"0003":{"name":"ABSMINHEATSETPOINTLIMIT"},"0004":{"name":"ABSMAXHEATSETPOINTLIMIT"},"0005":{"name":"ABSMINCOOLSETPOINTLIMIT"},"0006":{"name":"ABSMAXCOOLSETPOINTLIMIT"},"0007":{"name":"PICOOLINGDEMAND"},"0008":{"name":"PIHEATINGDEMAND"},"0009":{"name":"HVACSYSTEMTYPECONFIGURATION"},"0010":{"name":"LOCALTEMPERATURECALIBRATION"},"0011":{"name":"OCCUPIEDCOOLINGSETPOINT"},"0012":{"name":"OCCUPIEDHEATINGSETPOINT"},"0013":{"name":"UNOCCUPIEDCOOLINGSETPOINT"},"0014":{"name":"UNOCCUPIEDHEATINGSETPOINT"},"0015":{"name":"MINHEATSETPOINTLIMIT"},"0016":{"name":"MAXHEATSETPOINTLIMIT"},"0017":{"name":"MINCOOLSETPOINTLIMIT"},"0018":{"name":"MAXCOOLSETPOINTLIMIT"},"0019":{"name":"MINSETPOINTDEADBAND"},"001A":{"name":"REMOTESENSING"},"001B":{"name":"CONTROLSEQUENCEOFOPERATION"},"001C":{"name":"SYSTEMMODE"},"001D":{"name":"ALARMMASK"},"001E":{"name":"THERMOSTATRUNNINGMODE"},"0020":{"name":"STARTOFWEEK"},"0021":{"name":"NUMEROFWEEKLYTRANSITIONS"},"0022":{"name":"NUMEROFDAILYTRANSITIONS"},"0023":{"name":"TEMPERATURESETPOINTHOLD"},"0024":{"name":"TEMPERATURESETPOINTHOLDDURATION"},"0025":{"name":"THERMOSTATPROGRAMMINGOPERATIONMODE"},"0029":{"name":"THERMOSTATRUNNINGSTATE"},"0030":{"name":"SETPOINTCHANGESOURCE"},"0031":{"name":"SETPOINTCHANGEAMOUNT"},"0032":{"name":"SETPOINTCHANGESOURCETIMESTAMP"},"0034":{"name":"OCCUPIEDSETBACK"},"0035":{"name":"OCCUPIEDSETBACKMIN"},"0036":{"name":"OCCUPIEDSETBACKMAX"},"0037":{"name":"UNOCCUPIEDSETBACK"},"0038":{"name":"UNOCCUPIEDSETBACKMIN"},"0039":{"name":"UNOCCUPIEDSETBACKMAX"},"003A":{"name":"EMERGENCYHEATDELTA"},"0040":{"name":"ACTYPE"},"0041":{"name":"ACCAPACITY"},"0042":{"name":"ACREFRIGERANTTYPE"},"0043":{"name":"ACCOMPRESSORTYPE"},"0044":{"name":"ACERRORCODE"},"0045":{"name":"ACLOUVERPOSITION"},"0046":{"name":"ACCOILTEMPERATURE"},"0047":{"name":"ACCAPACITYFORMAT"}}},{"clusterId":"0202","name":"Fan_Control","attributes":{}},{"clusterId":"0204","name":"Thermostat_User_Interface_cfg","attributes":{}},{"clusterId":"0300","name":"Color_Control","attributes":{"4000":{"name":"ENHANCEDCURRENTHUE"},"4001":{"name":"ENHANCEDCOLORMODE"},"4002":{"name":"COLORLOOPACTIVE"},"4003":{"name":"COLORLOOPDIRECTION"},"4004":{"name":"COLORLOOPTIME"},"4005":{"name":"COLORLOOPSTARTHUE"},"4006":{"name":"COLORLOOPSTOREDHUE"},"0000":{"name":"CURRENTHUE"},"0001":{"name":"CURRENTSATURATION"},"0002":{"name":"REMAININGTIME"},"0003":{"name":"CURRENTX"},"0004":{"name":"CURRENTY"},"0005":{"name":"DRIFTCOMPENSATION"},"0006":{"name":"COMPENSATIONTEXT"},"0007":{"name":"COLORTEMPERATURE"},"0007:light":{"id":"level_control","arguments":{"command":"MoveToColorTemp|{device}|1|01|{value}|0001","min":100,"max":600}},"0008":{"name":"COLORMODE"},"400A":{"name":"COLORCAPABILITIES"},"400B":{"name":"COLORTEMPERATUREMIN"},"400C":{"name":"COLORTEMPERATUREMAX"}}},{"clusterId":"0400","name":"Illuminance_Measurement","attributes":{"0000":{"name":"MEASUREDVALUE"},"0001":{"name":"MINMEASUREDVALUE"},"0002":{"name":"MAXMEASUREDVALUE"},"0003":{"name":"TOLERANCE"},"0004":{"name":"LIGHTSENSORTYPE"}}},{"clusterId":"0401","name":"Illuminance_Level_Sensing","attributes":{"0000":{"name":"LEVELSTATUS"},"0001":{"name":"LIGHTSENSORTYPE"},"0010":{"name":"ILLUMINANCETARGETLEVEL"}}},{"clusterId":"0402","name":"Temperature_Measurement","attributes":{"0000":{"name":"MEASUREDVALUE"},"0001":{"name":"MINMEASUREDVALUE"},"0002":{"name":"MAXMEASUREDVALUE"},"0003":{"name":"TOLERANCE"}}},{"clusterId":"0403","name":"Pressure_Measurement","attributes":{"0000":{"name":"MEASUREDVALUE"},"0001":{"name":"MINMEASUREDVALUE"},"0002":{"name":"MAXMEASUREDVALUE"},"0003":{"name":"TOLERANCE"},"0010":{"name":"SCALEDVALUE"},"0011":{"name":"MINSCALEDVALUE"},"0012":{"name":"MAXSCALEDVALUE"},"0013":{"name":"SCALEDTOLERANCE"},"0014":{"name":"SCALE"}}},{"clusterId":"0404","name":"Flow_Measurement","attributes":{}},{"clusterId":"0405","name":"Relative_Humidity_Measurement","attributes":{"0000":{"name":"Humidity"}}},{"clusterId":"0406","name":"Occupancy_Sensing","attributes":{}},{"clusterId":"0500","name":"Ias_Zone","attributes":{"0000":{"name":"ZONESTATE"},"0001":{"name":"ZONETYPE"},"0002":{"name":"ZONESTATUS"},"0010":{"name":"IASCIEADDRESS"},"0011":{"name":"ZONEID"},"0012":{"name":"NUMBEROFZONESENSITIVITYLEVELSSUPPORTED"},"0013":{"name":"CURRENTZONESENSITIVITYLEVEL"}}},{"clusterId":"0501","name":"Ias_Ace","attributes":{}},{"clusterId":"0502","name":"Ias_Wd","attributes":{}},{"clusterId":"0702","name":"Metering","attributes":{"0000":{"name":"CURRENTSUMMATIONDELIVERED"}}},{"clusterId":"0B00","name":"En50523_Appliance_Identification","attributes":{}},{"clusterId":"0B01","name":"Meter_Identification","attributes":{}},{"clusterId":"0B02","name":"En50523_Appliance_Events_And_Alert","attributes":{}},{"clusterId":"0B03","name":"Appliance_Statistics","attributes":{}},{"clusterId":"0B04","name":"Electricity_Measurement","attributes":{"0000":{"name":"MEASUREMENTTYPE"},"0100":{"name":"DCVOLTAGE"},"0101":{"name":"DCVOLTAGEMIN"},"0102":{"name":"DCVOLTAGEMAX"},"0103":{"name":"DCCURRENT"},"0104":{"name":"DCCURRENTMIN"},"0105":{"name":"DCCURRENTMAX"},"0106":{"name":"DCPOWER"},"0107":{"name":"DCPOWERMIN"},"0108":{"name":"DCPOWERMAX"},"0200":{"name":"DCVOLTAGEMULTIPLIER"},"0201":{"name":"DCVOLTAGEDIVISOR"},"0202":{"name":"DCCURRENTMULTIPLIER"},"0203":{"name":"DCCURRENTDIVISOR"},"0204":{"name":"DCPOWERMULTIPLIER"},"0205":{"name":"DCPOWERDIVISOR"},"0300":{"name":"ACFREQUENCY"},"0301":{"name":"ACFREQUENCYMIN"},"0302":{"name":"ACFREQUENCYMAX"},"0303":{"name":"NEUTRALCURRENT"},"0304":{"name":"TOTALACTIVEPOWER"},"0305":{"name":"TOTALREACTIVEPOWER"},"0306":{"name":"TOTALAPPARENTPOWER"},"0307":{"name":"MEASURED1STHARMONICCURRENT"},"0308":{"name":"MEASURED3RDHARMONICCURRENT"},"0309":{"name":"MEASURED5THHARMONICCURRENT"},"030A":{"name":"MEASURED7THHARMONICCURRENT"},"030B":{"name":"MEASURED9THHARMONICCURRENT"},"030C":{"name":"MEASURED11THHARMONICCURRENT"},"030D":{"name":"MEASUREDPHASE1STHARMONICCURRENT"},"030E":{"name":"MEASUREDPHASE3RDHARMONICCURRENT"},"030F":{"name":"MEASUREDPHASE5THHARMONICCURRENT"},"0310":{"name":"MEASUREDPHASE7THHARMONICCURRENT"},"0311":{"name":"MEASUREDPHASE9THHARMONICCURRENT"},"0312":{"name":"MEASUREDPHASE11THHARMONICCURRENT"},"0400":{"name":"ACFREQUENCYMULTIPLIER"},"0401":{"name":"ACFREQUENCYDIVISOR"},"0402":{"name":"POWERMULTIPLIER"},"0403":{"name":"POWERDIVISOR"},"0404":{"name":"HARMONICCURRENTMULTIPLIER"},"0405":{"name":"PHASEHARMONICCURRENTMULTIPLIER"},"0500":{"name":"INSTANTANEOUSVOLTAGE"},"0501":{"name":"INSTANTANEOUSLINECURRENT"},"0502":{"name":"INSTANTANEOUSACTIVECURRENT"},"0503":{"name":"INSTANTANEOUSREACTIVECURRENT"},"0504":{"name":"INSTANTANEOUSPOWER"},"0505":{"name":"RMSVOLTAGE"},"0506":{"name":"RMSVOLTAGEMIN"},"0507":{"name":"RMSVOLTAGEMAX"},"0508":{"name":"RMSCURRENT"},"0509":{"name":"RMSCURRENTMIN"},"050A":{"name":"RMSCURRENTMAX"},"050B":{"name":"ACTIVEPOWER"},"050C":{"name":"ACTIVEPOWERMIN"},"050D":{"name":"ACTIVEPOWERMAX"},"050E":{"name":"REACTIVEPOWER"},"050F":{"name":"APPARENTPOWER"},"0510":{"name":"POWERFACTOR"},"0511":{"name":"AVERAGERMSVOLTAGEMEASUREMENTPERIOD"},"0513":{"name":"AVERAGERMSUNDERVOLTAGECOUNTER"},"0514":{"name":"RMSEXTREMEOVERVOLTAGEPERIOD"},"0515":{"name":"RMSEXTREMEUNDERVOLTAGEPERIOD"},"0516":{"name":"RMSVOLTAGESAGPERIOD"},"0517":{"name":"RMSVOLTAGESWELLPERIOD"},"0600":{"name":"ACVOLTAGEMULTIPLIER"},"0601":{"name":"ACVOLTAGEDIVISOR"},"0602":{"name":"ACCURRENTMULTIPLIER"},"0603":{"name":"ACCURRENTDIVISOR"},"0604":{"name":"ACPOWERMULTIPLIER"},"0605":{"name":"ACPOWERDIVISOR"},"0700":{"name":"OVERLOADALARMSMASK"},"0701":{"name":"VOLTAGEOVERLOAD"},"0702":{"name":"CURRENTOVERLOAD"},"0800":{"name":"ACOVERLOADALARMSMASK"},"0801":{"name":"ACVOLTAGEOVERLOAD"},"0802":{"name":"ACCURRENTOVERLOAD"},"0803":{"name":"ACACTIVEPOWEROVERLOAD"},"0804":{"name":"ACREACTIVEPOWEROVERLOAD"},"0805":{"name":"AVERAGERMSOVERVOLTAGE"},"0806":{"name":"AVERAGERMSUNDERVOLTAGE"},"0807":{"name":"RMSEXTREMEOVERVOLTAGE"},"0808":{"name":"RMSEXTREMEUNDERVOLTAGE"},"0809":{"name":"RMSVOLTAGESAG"},"080A":{"name":"RMSVOLTAGESWELL"},"0901":{"name":"LINECURRENTPHASEB"},"0902":{"name":"ACTIVECURRENTPHASEB"},"0903":{"name":"REACTIVECURRENTPHASEB"},"0905":{"name":"RMSVOLTAGEPHASEB"},"0906":{"name":"RMSVOLTAGEMINPHASEB"},"0907":{"name":"RMSVOLTAGEMAXPHASEB"},"0908":{"name":"RMSCURRENTPHASEB"},"0909":{"name":"RMSCURRENTMINPHASEB"},"090A":{"name":"RMSCURRENTMAXPHASEB"},"090B":{"name":"ACTIVEPOWERPHASEB"},"090C":{"name":"ACTIVEPOWERMINPHASEB"},"090D":{"name":"ACTIVEPOWERMAXPHASEB"},"090E":{"name":"REACTIVEPOWERPHASEB"},"090F":{"name":"APPARENTPOWERPHASEB"},"0910":{"name":"POWERFACTORPHASEB"},"0911":{"name":"AVERAGERMSVOLTAGEMEASUREMENTPERIODPHASEB"},"0912":{"name":"AVERAGERMSOVERVOLTAGECOUNTERPHASEB"},"0913":{"name":"AVERAGERMSUNDERVOLTAGECOUNTERPHASEB"},"0914":{"name":"RMSEXTREMEOVERVOLTAGEPERIODPHASEB"},"0915":{"name":"RMSEXTREMEUNDERVOLTAGEPERIODPHASEB"},"0916":{"name":"RMSVOLTAGESAGPERIODPHASEB"},"0917":{"name":"RMSVOLTAGESWELLPERIODPHASEB"},"0A01":{"name":"LINECURRENTPHASEC"},"0A02":{"name":"ACTIVECURRENTPHASEC"},"0A03":{"name":"REACTIVECURRENTPHASEC"},"0A05":{"name":"RMSVOLTAGEPHASEC"},"0A06":{"name":"RMSVOLTAGEMINPHASEC"},"0A07":{"name":"RMSVOLTAGEMAXPHASEC"},"0A08":{"name":"RMSCURRENTPHASEC"},"0A09":{"name":"RMSCURRENTMINPHASEC"},"0A0A":{"name":"RMSCURRENTMAXPHASEC"},"0A0B":{"name":"ACTIVEPOWERPHASEC"},"0A0C":{"name":"ACTIVEPOWERMINPHASEC"},"0A0D":{"name":"ACTIVEPOWERMAXPHASEC"},"0A0E":{"name":"REACTIVEPOWERPHASEC"},"0A0F":{"name":"APPARENTPOWERPHASEC"},"0A10":{"name":"POWERFACTORPHASEC"},"0A11":{"name":"AVERAGERMSVOLTAGEMEASUREMENTPERIODPHASEC"},"0A12":{"name":"AVERAGERMSOVERVOLTAGECOUNTERPHASEC"},"0A13":{"name":"AVERAGERMSUNDERVOLTAGECOUNTERPHASEC"},"0A14":{"name":"RMSEXTREMEOVERVOLTAGEPERIODPHASEC"},"0A15":{"name":"RMSEXTREMEUNDERVOLTAGEPERIODPHASEC"},"0A16":{"name":"RMSVOLTAGESAGPERIODPHASEC"},"0A17":{"name":"RMSVOLTAGESWELLPERIODPHASEC"}}},{"clusterId":"0B05","name":"Diagnostics","attributes":{}},{"clusterId":"1000","name":"Zll_Commissioning","attributes":{}},{"clusterId":"BBBB","name":"Custom"},{"clusterId":"ble_InRange","name":"In range"},{"clusterId":"ble_signal_level","name":"Signal level"}]')}},[[374,1,2]]]);
//# sourceMappingURL=main.aa2f5dc8.chunk.js.map